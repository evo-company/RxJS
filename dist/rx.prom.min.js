/* Copyright (c) Microsoft Open Technologies, Inc. All rights reserved. See License.txt in the project root for license information.*/
(function(y){var t={function:!0,object:!0};function e(t){return t&&t.Object===Object?t:null}var n,r=t[typeof exports]&&exports&&!exports.nodeType?exports:null,i=t[typeof module]&&module&&!module.nodeType?module:null,h=e(r&&i&&"object"==typeof global&&global),o=e(t[typeof self]&&self),s=e(t[typeof window]&&window),a=i&&i.exports===r?r:null,u=e(t[typeof this]&&this),p=h||s!==(u&&u.window)&&s||o||u||Function("return this")(),c={internals:{},config:{Promise:p.Promise},helpers:{}},l=c.helpers.noop=function(){},f=c.helpers.identity=function(t){return t},d=c.helpers.defaultNow=Date.now,b=c.helpers.defaultComparer=function(t,e){return wt(t,e)},v=c.helpers.defaultSubComparer=function(t,e){return e<t?1:t<e?-1:0},_=(c.helpers.defaultKeySerializer=function(t){return t.toString()},c.helpers.defaultError=function(t){throw t}),w=c.helpers.isPromise=function(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then},m=c.helpers.isFunction=((n=function(t){return"function"==typeof t||!1})(/x/)&&(n=function(t){return"function"==typeof t&&"[object Function]"==toString.call(t)}),n);function g(t){for(var e=t.length,n=new Array(e),r=0;r<e;r++)n[r]=t[r];return n}var E=c.AsyncSubject=function(t){function e(){t.call(this),this.isDisposed=!1,this.isStopped=!1,this.hasValue=!1,this.observers=[],this.hasError=!1}return mt(e,t),gt(e.prototype,he.prototype,{_subscribe:function(t){return jt(this),this.isStopped?(this.hasError?t.onError(this.error):(this.hasValue&&t.onNext(this.value),t.onCompleted()),At):(this.observers.push(t),new yr(this,t))},hasObservers:function(){return jt(this),0<this.observers.length},onCompleted:function(){var t;if(jt(this),!this.isStopped){this.isStopped=!0;var e=g(this.observers),n=e.length;if(this.hasValue)for(t=0;t<n;t++){var r=e[t];r.onNext(this.value),r.onCompleted()}else for(t=0;t<n;t++)e[t].onCompleted();this.observers.length=0}},onError:function(t){if(jt(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=t;for(var e=0,n=g(this.observers),r=n.length;e<r;e++)n[e].onError(t);this.observers.length=0}},onNext:function(t){jt(this),this.isStopped||(this.value=t,this.hasValue=!0)},dispose:function(){this.isDisposed=!0,this.observers=null,this.error=null,this.value=null}}),e}(fe),C={e:{}};var x=c.internals.tryCatch=function(t){if(!m(t))throw new TypeError("fn must be a function");return e=t,function(){try{return e.apply(this,arguments)}catch(t){return C.e=t,C}};var e};function D(t){throw t}var N=c.config.longStackSupport=!1,S=x(function(){throw new Error})();N=!!S.e&&!!S.e.stack;var A,O=q(),j="From previous event:";function k(t,e){if(N&&e.stack&&"object"==typeof t&&null!==t&&t.stack&&-1===t.stack.indexOf(j)){for(var n=[],r=e;r;r=r.source)r.stack&&n.unshift(r.stack);n.unshift(t.stack);var i=n.join("\n"+j+"\n");t.stack=function(t){for(var e=t.split("\n"),n=[],r=0,i=e.length;r<i;r++){var o=e[r];!F(o)&&(-1===(s=o).indexOf("(module.js:")&&-1===s.indexOf("(node.js:"))&&o&&n.push(o)}var s;return n.join("\n")}(i)}}function F(t){var e=T(t);if(!e)return!1;var n=e[0],r=e[1];return n===A&&O<=r&&r<=gr}function q(){if(N)try{throw new Error}catch(t){var e=t.stack.split("\n"),n=T(0<e[0].indexOf("@")?e[1]:e[2]);if(!n)return;return A=n[0],n[1]}}function T(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(t);return r?[r[1],Number(r[2])]:void 0}var M=c.EmptyError=function(){this.message="Sequence contains no elements.",Error.call(this)};M.prototype=Object.create(Error.prototype),M.prototype.name="EmptyError";var R=c.ObjectDisposedError=function(){this.message="Object has been disposed",Error.call(this)};R.prototype=Object.create(Error.prototype),R.prototype.name="ObjectDisposedError";var V=c.ArgumentOutOfRangeError=function(){this.message="Argument out of range",Error.call(this)};V.prototype=Object.create(Error.prototype),V.prototype.name="ArgumentOutOfRangeError";var L=c.NotSupportedError=function(t){this.message=t||"This operation is not supported",Error.call(this)};L.prototype=Object.create(Error.prototype),L.prototype.name="NotSupportedError";var P=c.NotImplementedError=function(t){this.message=t||"This operation is not implemented",Error.call(this)};P.prototype=Object.create(Error.prototype),P.prototype.name="NotImplementedError";var I=c.helpers.notImplemented=function(){throw new P},W=(c.helpers.notSupported=function(){throw new L},"function"==typeof Symbol&&Symbol.iterator||"_es6shim_iterator_");p.Set&&"function"==typeof(new p.Set)["@@iterator"]&&(W="@@iterator");var z=c.doneEnumerator={done:!0,value:y},U=c.helpers.isIterable=function(t){return t&&t[W]!==y},K=c.helpers.isArrayLike=function(t){return t&&t.length!==y};c.helpers.iterator=W;var B=c.internals.bindCallback=function(r,i,t){if(void 0===i)return r;switch(t){case 0:return function(){return r.call(i)};case 1:return function(t){return r.call(i,t)};case 2:return function(t,e){return r.call(i,t,e)};case 3:return function(t,e,n){return r.call(i,t,e,n)}}return function(){return r.apply(i,arguments)}},$="[object Arguments]",H="[object Array]",G="[object Boolean]",J="[object Date]",Q="[object Error]",X="[object Number]",Y="[object Object]",Z="[object RegExp]",tt="[object String]",et={};et["[object Float32Array]"]=et["[object Float64Array]"]=et["[object Int8Array]"]=et["[object Int16Array]"]=et["[object Int32Array]"]=et["[object Uint8Array]"]=et["[object Uint8ClampedArray]"]=et["[object Uint16Array]"]=et["[object Uint32Array]"]=!0,et[$]=et[H]=et["[object ArrayBuffer]"]=et[G]=et[J]=et[Q]=et["[object Function]"]=et["[object Map]"]=et[X]=et[Y]=et[Z]=et["[object Set]"]=et[tt]=et["[object WeakMap]"]=!1;var nt,rt,it,ot,st=Object.prototype,ut=st.hasOwnProperty,ct=st.toString,ht=Math.pow(2,53)-1,at=Object.keys||(nt=Object.prototype.hasOwnProperty,rt=!{toString:null}.propertyIsEnumerable("toString"),ot=(it=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(t){if("object"!=typeof t&&("function"!=typeof t||null===t))throw new TypeError("Object.keys called on non-object");var e,n,r=[];for(e in t)nt.call(t,e)&&r.push(e);if(rt)for(n=0;n<ot;n++)nt.call(t,it[n])&&r.push(it[n]);return r});var pt=c.internals.isObject=function(t){var e=typeof t;return!!t&&("object"===e||"function"===e)};function lt(t){return!!t&&"object"==typeof t}function ft(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=ht}var dt=function(){try{Object({toString:0}+"")}catch(t){return function(){return!1}}return function(t){return"function"!=typeof t.toString&&"string"==typeof(t+"")}}();var bt=Array.isArray||function(t){return lt(t)&&ft(t.length)&&ct.call(t)===H};function vt(t,e){for(var n=-1,r=t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function _t(t,e,n,r,i,o){var s,u=bt(t),c=bt(e),h=H,a=H;u||((h=ct.call(t))===$?h=Y:h!==Y&&(u=lt(s=t)&&ft(s.length)&&!!et[ct.call(s)])),c||(a=ct.call(e))===$&&(a=Y);var p=h===Y&&!dt(t),l=a===Y&&!dt(e),f=h===a;if(f&&!u&&!p)return function(t,e,n){switch(n){case G:case J:return+t==+e;case Q:return t.name===e.name&&t.message===e.message;case X:return t!==+t?e!==+e:t===+e;case Z:case tt:return t===e+""}return!1}(t,e,h);if(!r){var d=p&&ut.call(t,"__wrapped__"),b=l&&ut.call(e,"__wrapped__");if(d||b)return n(d?t.value():t,b?e.value():e,r,i,o)}if(!f)return!1;i||(i=[]),o||(o=[]);for(var v=i.length;v--;)if(i[v]===t)return o[v]===e;i.push(t),o.push(e);var _=(u?function(t,e,n,r,i,o){var s=-1,u=t.length,c=e.length;if(u!==c&&!(r&&u<c))return!1;for(;++s<u;){var h=t[s],a=e[s];if(void 0!==y)return!1;if(r){if(!vt(e,function(t){return h===t||n(h,t,r,i,o)}))return!1}else if(h!==a&&!n(h,a,r,i,o))return!1}return!0}:function(t,e,n,r,i,o){var s=at(t),u=s.length;if(u!==at(e).length&&!r)return!1;for(var c,h=u;h--;)if(c=s[h],!(r?c in e:ut.call(e,c)))return!1;for(var a=r;++h<u;){var p=t[c=s[h]],l=e[c];if(!(void 0===y?n(p,l,r,i,o):void 0))return!1;a||(a="constructor"===c)}if(!a){var f=t.constructor,d=e.constructor;if(f!==d&&"constructor"in t&&"constructor"in e&&!("function"==typeof f&&f instanceof f&&"function"==typeof d&&d instanceof d))return!1}return!0})(t,e,n,r,i,o);return i.pop(),o.pop(),_}function yt(t,e,n,r,i){return t===e||(null==t||null==e||!pt(t)&&!lt(e)?t!=t&&e!=e:_t(t,e,yt,n,r,i))}var wt=c.internals.isEqual=function(t,e){return yt(t,e)},mt=(Array.prototype.slice,c.internals.inherits=function(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}),gt=c.internals.addProperties=function(t){for(var e=[],n=1,r=arguments.length;n<r;n++)e.push(arguments[n]);for(var i=0,o=e.length;i<o;i++){var s=e[i];for(var u in s)t[u]=s[u]}},Et=c.internals.addRef=function(e,n){return new vr(function(t){return new Tt(n.getDisposable(),e.subscribe(t))})};function Ct(t,e){for(var n=new Array(t),r=0;r<t;r++)n[r]=e();return n}var xt=c.CompositeDisposable=function(){var t,e,n=[];if(Array.isArray(arguments[0]))n=arguments[0];else for(e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];this.disposables=n,this.isDisposed=!1,this.length=n.length},Dt=xt.prototype;Dt.add=function(t){this.isDisposed?t.dispose():(this.disposables.push(t),this.length++)},Dt.remove=function(t){var e=!1;if(!this.isDisposed){var n=this.disposables.indexOf(t);-1!==n&&(e=!0,this.disposables.splice(n,1),this.length--,t.dispose())}return e},Dt.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var t=this.disposables.length,e=new Array(t),n=0;n<t;n++)e[n]=this.disposables[n];for(this.disposables=[],n=this.length=0;n<t;n++)e[n].dispose()}};var Nt=c.Disposable=function(t){this.isDisposed=!1,this.action=t||l};Nt.prototype.dispose=function(){this.isDisposed||(this.action(),this.isDisposed=!0)};var St=Nt.create=function(t){return new Nt(t)},At=Nt.empty={dispose:l},Ot=Nt.isDisposable=function(t){return t&&m(t.dispose)},jt=Nt.checkDisposed=function(t){if(t.isDisposed)throw new R},kt=Nt._fixup=function(t){return Ot(t)?t:At},Ft=c.SingleAssignmentDisposable=function(){this.isDisposed=!1,this.current=null};Ft.prototype.getDisposable=function(){return this.current},Ft.prototype.setDisposable=function(t){if(this.current)throw new Error("Disposable has already been assigned");var e=this.isDisposed;!e&&(this.current=t),e&&t&&t.dispose()},Ft.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this.current;this.current=null,t&&t.dispose()}};var qt=c.SerialDisposable=function(){this.isDisposed=!1,this.current=null};qt.prototype.getDisposable=function(){return this.current},qt.prototype.setDisposable=function(t){var e=this.isDisposed;if(!e){var n=this.current;this.current=t}n&&n.dispose(),e&&t&&t.dispose()},qt.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this.current;this.current=null}t&&t.dispose()};var Tt=c.BinaryDisposable=function(t,e){this._first=t,this._second=e,this.isDisposed=!1};Tt.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this._first;this._first=null,t&&t.dispose();var e=this._second;this._second=null,e&&e.dispose()}};var Mt=c.NAryDisposable=function(t){this._disposables=t,this.isDisposed=!1};Mt.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var t=0,e=this._disposables.length;t<e;t++)this._disposables[t].dispose();this._disposables.length=0}};var Rt=c.RefCountDisposable=function(){function t(t){this.disposable=t,this.disposable.count++,this.isInnerDisposed=!1}function e(t){this.underlyingDisposable=t,this.isDisposed=!1,this.isPrimaryDisposed=!1,this.count=0}return t.prototype.dispose=function(){this.disposable.isDisposed||this.isInnerDisposed||(this.isInnerDisposed=!0,this.disposable.count--,0===this.disposable.count&&this.disposable.isPrimaryDisposed&&(this.disposable.isDisposed=!0,this.disposable.underlyingDisposable.dispose()))},e.prototype.dispose=function(){this.isDisposed||this.isPrimaryDisposed||(this.isPrimaryDisposed=!0,0===this.count&&(this.isDisposed=!0,this.underlyingDisposable.dispose()))},e.prototype.getDisposable=function(){return this.isDisposed?At:new t(this)},e}(),Vt=c.internals.ScheduledItem=function(t,e,n,r,i){this.scheduler=t,this.state=e,this.action=n,this.dueTime=r,this.comparer=i||v,this.disposable=new Ft};Vt.prototype.invoke=function(){this.disposable.setDisposable(this.invokeCore())},Vt.prototype.compareTo=function(t){return this.comparer(this.dueTime,t.dueTime)},Vt.prototype.isCancelled=function(){return this.disposable.isDisposed},Vt.prototype.invokeCore=function(){return kt(this.action(this.scheduler,this.state))};var Lt=c.Scheduler=function(){function i(){}i.isScheduler=function(t){return t instanceof i};var t=i.prototype;return t.schedule=function(t,e){throw new P},t.scheduleFuture=function(t,e,n){var r=e;return r instanceof Date&&(r-=this.now()),0===(r=i.normalize(r))?this.schedule(t,n):this._scheduleFuture(t,r,n)},t._scheduleFuture=function(t,e,n){throw new P},i.now=d,i.prototype.now=d,i.normalize=function(t){return t<0&&(t=0),t},i}(),Pt=Lt.normalize,It=Lt.isScheduler;!function(t){function n(o,t){var e=t[0],s=t[1],u=new xt;return s(e,function(t){var n=!1,r=!1;var i=o.schedule(t,function(t,e){n?u.remove(i):r=!0;return s(e,c),At});r||(u.add(i),n=!0)}),u;function c(t){var n=false,r=false;var i=o.schedule(t,e);if(!r){u.add(i);n=true}function e(t,e){if(n){u.remove(i)}else{r=true}return s(e,c),At}}}function r(s,t){var e=t[0],u=t[1],c=new xt;return u(e,function(t,e){var n=!1,r=!1;var i=s.scheduleFuture(t,e,function(t,e){n?c.remove(i):r=!0;return u(e,h),At});r||(c.add(i),n=!0)}),c;function h(t,e){var n=false,r=false;var i=s.scheduleFuture(t,e,o);if(!r){c.add(i);n=true}function o(t,e){if(n){c.remove(i)}else{r=true}return u(e,h),At}}}t.scheduleRecursive=function(t,e){return this.schedule([t,e],n)},t.scheduleRecursiveFuture=function(t,e,n){return this.scheduleFuture([t,n],e,r)}}(Lt.prototype),Lt.prototype.schedulePeriodic=function(t,e,n){if(void 0===p.setInterval)throw new L;e=Pt(e);var r=t,i=p.setInterval(function(){r=n(r)},e);return St(function(){p.clearInterval(i)})};var Wt,zt,Ut=function(t){function e(){t.call(this)}return mt(e,t),e.prototype.schedule=function(t,e){return kt(e(this,t))},e}(Lt),Kt=Lt.immediate=new Ut,Bt=function(t){var i;function o(){for(;0<i.length;){var t=i.dequeue();!t.isCancelled()&&t.invoke()}}function e(){t.call(this)}return mt(e,t),e.prototype.schedule=function(t,e){var n=new Vt(this,t,e,this.now());if(i)i.enqueue(n);else{(i=new Zt(4)).enqueue(n);var r=x(o)();i=null,r===C&&D(r.e)}return n.disposable},e.prototype.scheduleRequired=function(){return!i},e}(Lt),$t=Lt.currentThread=new Bt,Ht=(c.internals.SchedulePeriodicRecursive=function(){function t(t,e,n,r){this._scheduler=t,this._state=e,this._period=n,this._action=r}return t.prototype.start=function(){var r,t=new Ft;return(this._cancel=t).setDisposable(this._scheduler.scheduleRecursiveFuture(0,this._period,(r=this,function(t,e){e(0,r._period);var n=x(r._action)(r._state);n===C&&(r._cancel.dispose(),D(n.e)),r._state=n}))),t},t}(),function(){var t,e=l;if(p.setTimeout)t=p.setTimeout,e=p.clearTimeout;else{if(!p.WScript)throw new L;t=function(t,e){p.WScript.Sleep(e),t()}}return{setTimeout:t,clearTimeout:e}}()),Gt=Ht.setTimeout,Jt=Ht.clearTimeout;!function(){var r=1,i={},o=!1;function s(t){if(o)Gt(function(){s(t)},0);else{var e=i[t];if(e){o=!0;var n=x(e)();zt(t),o=!1,n===C&&D(n.e)}}}zt=function(t){delete i[t]};var t=new RegExp("^"+String(toString).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),n="function"==typeof(n=h&&a&&h.setImmediate)&&!t.test(n)&&n;if(m(n))Wt=function(t){var e=r++;return i[e]=t,n(function(){s(e)}),e};else if("undefined"!=typeof process&&"[object process]"==={}.toString.call(process))Wt=function(t){var e=r++;return i[e]=t,process.nextTick(function(){s(e)}),e};else if(function(){if(!p.postMessage||p.importScripts)return!1;var t=!1,e=p.onmessage;return p.onmessage=function(){t=!0},p.postMessage("","*"),p.onmessage=e,t}()){var u="ms.rx.schedule"+Math.random();p.addEventListener("message",function(t){"string"==typeof t.data&&t.data.substring(0,u.length)===u&&s(t.data.substring(u.length))},!1),Wt=function(t){var e=r++;return i[e]=t,p.postMessage(u+e,"*"),e}}else if(p.MessageChannel){var c=new p.MessageChannel;c.port1.onmessage=function(t){s(t.data)},Wt=function(t){var e=r++;return i[e]=t,c.port2.postMessage(e),e}}else Wt="document"in p&&"onreadystatechange"in p.document.createElement("script")?function(t){var e=p.document.createElement("script"),n=r++;return i[n]=t,e.onreadystatechange=function(){s(n),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},p.document.documentElement.appendChild(e),n}:function(t){var e=r++;return i[e]=t,Gt(function(){s(e)},0),e}}();var Qt=function(t){function e(){t.call(this)}function o(t,e,n,r){return function(){t.setDisposable(Nt._fixup(e(n,r)))}}function i(t){this._id=t,this.isDisposed=!1}function s(t){this._id=t,this.isDisposed=!1}return mt(e,t),i.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,zt(this._id))},s.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,Jt(this._id))},e.prototype.schedule=function(t,e){var n=new Ft,r=Wt(o(n,e,this,t));return new Tt(n,new i(r))},e.prototype._scheduleFuture=function(t,e,n){if(0===e)return this.schedule(t,n);var r=new Ft,i=Gt(o(r,n,this,t),e);return new Tt(r,new s(i))},e.prototype.scheduleLongRunning=function(t,e){var n,r,i,o=St(l);return Wt((n=t,r=e,i=o,function(){r(n,i)})),o},e}(Lt),Xt=Lt.default=Lt.async=new Qt;function Yt(t,e){this.id=t,this.value=e}Yt.prototype.compareTo=function(t){var e=this.value.compareTo(t.value);return 0===e&&(e=this.id-t.id),e};var Zt=c.internals.PriorityQueue=function(t){this.items=new Array(t),this.length=0},te=Zt.prototype;te.isHigherPriority=function(t,e){return this.items[t].compareTo(this.items[e])<0},te.percolate=function(t){if(!(t>=this.length||t<0)){var e=t-1>>1;if(!(e<0||e===t)&&this.isHigherPriority(t,e)){var n=this.items[t];this.items[t]=this.items[e],this.items[e]=n,this.percolate(e)}}},te.heapify=function(t){if(+t||(t=0),!(t>=this.length||t<0)){var e=2*t+1,n=2*t+2,r=t;if(e<this.length&&this.isHigherPriority(e,r)&&(r=e),n<this.length&&this.isHigherPriority(n,r)&&(r=n),r!==t){var i=this.items[t];this.items[t]=this.items[r],this.items[r]=i,this.heapify(r)}}},te.peek=function(){return this.items[0].value},te.removeAt=function(t){this.items[t]=this.items[--this.length],this.items[this.length]=y,this.heapify()},te.dequeue=function(){var t=this.peek();return this.removeAt(0),t},te.enqueue=function(t){var e=this.length++;this.items[e]=new Yt(Zt.count++,t),this.percolate(e)},te.remove=function(t){for(var e=0;e<this.length;e++)if(this.items[e].value===t)return this.removeAt(e),!0;return!1},Zt.count=0;var ee,ne=c.Notification=function(){function t(){}return t.prototype._accept=function(t,e,n){throw new P},t.prototype._acceptObserver=function(t,e,n){throw new P},t.prototype.accept=function(t,e,n){return t&&"object"==typeof t?this._acceptObserver(t):this._accept(t,e,n)},t.prototype.toObservable=function(t){var e=this;return It(t)||(t=Kt),new vr(function(n){return t.schedule(e,function(t,e){e._acceptObserver(n),"N"===e.kind&&n.onCompleted()})})},t}(),re=function(t){function e(t){this.value=t,this.kind="N"}return mt(e,ne),e.prototype._accept=function(t){return t(this.value)},e.prototype._acceptObserver=function(t){return t.onNext(this.value)},e.prototype.toString=function(){return"OnNext("+this.value+")"},e}(),ie=function(t){function e(t){this.error=t,this.kind="E"}return mt(e,ne),e.prototype._accept=function(t,e){return e(this.error)},e.prototype._acceptObserver=function(t){return t.onError(this.error)},e.prototype.toString=function(){return"OnError("+this.error+")"},e}(),oe=function(t){function e(){this.kind="C"}return mt(e,ne),e.prototype._accept=function(t,e,n){return n()},e.prototype._acceptObserver=function(t){return t.onCompleted()},e.prototype.toString=function(){return"OnCompleted()"},e}(),se=ne.createOnNext=function(t){return new re(t)},ue=ne.createOnError=function(t){return new ie(t)},ce=ne.createOnCompleted=function(){return new oe},he=c.Observer=function(){},ae=he.create=function(t,e,n){return t||(t=l),e||(e=_),n||(n=l),new le(t,e,n)},pe=c.internals.AbstractObserver=function(t){function e(){this.isStopped=!1}return mt(e,he),e.prototype.next=I,e.prototype.error=I,e.prototype.completed=I,e.prototype.onNext=function(t){!this.isStopped&&this.next(t)},e.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.error(t))},e.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.completed())},e.prototype.dispose=function(){this.isStopped=!0},e.prototype.fail=function(t){return!this.isStopped&&(this.isStopped=!0,this.error(t),!0)},e}(),le=c.AnonymousObserver=function(r){function t(t,e,n){r.call(this),this._onNext=t,this._onError=e,this._onCompleted=n}return mt(t,r),t.prototype.next=function(t){this._onNext(t)},t.prototype.error=function(t){this._onError(t)},t.prototype.completed=function(){this._onCompleted()},t}(pe),fe=c.Observable=function(){function t(){if(c.config.longStackSupport&&N){var t=this._subscribe,e=x(D)(new Error).e;this.stack=e.stack.substring(e.stack.indexOf("\n")+1),this._subscribe=(r=this,i=t,function(e){var n=e.onError;return e.onError=function(t){k(t,r),n.call(e,t)},i.call(r,e)})}var r,i}return ee=t.prototype,t.isObservable=function(t){return t&&m(t.subscribe)},ee.subscribe=ee.forEach=function(t,e,n){return this._subscribe("object"==typeof t?t:ae(t,e,n))},ee.subscribeOnNext=function(e,n){return this._subscribe(ae(void 0!==n?function(t){e.call(n,t)}:e))},ee.subscribeOnError=function(e,n){return this._subscribe(ae(null,void 0!==n?function(t){e.call(n,t)}:e))},ee.subscribeOnCompleted=function(t,e){return this._subscribe(ae(null,null,void 0!==e?function(){t.call(e)}:t))},t}(),de=c.internals.ScheduledObserver=function(n){function t(t,e){n.call(this),this.scheduler=t,this.observer=e,this.isAcquired=!1,this.hasFaulted=!1,this.queue=[],this.disposable=new qt}function e(t,e){var n;if(0<t.queue.length){n=t.queue.shift();var r=x(n)();if(r===C)return t.queue=[],t.hasFaulted=!0,D(r.e);e(t)}else t.isAcquired=!1}return mt(t,n),t.prototype.next=function(t){var e,n;this.queue.push((e=this.observer,n=t,function(){e.onNext(n)}))},t.prototype.error=function(t){var e,n;this.queue.push((e=this.observer,n=t,function(){e.onError(n)}))},t.prototype.completed=function(){var t;this.queue.push((t=this.observer,function(){t.onCompleted()}))},t.prototype.ensureActive=function(){var t=!1;!this.hasFaulted&&0<this.queue.length&&(t=!this.isAcquired,this.isAcquired=!0),t&&this.disposable.setDisposable(this.scheduler.scheduleRecursive(this,e))},t.prototype.dispose=function(){n.prototype.dispose.call(this),this.disposable.dispose()},t}(pe),be=c.ObservableBase=function(t){function r(t,e){var n,r=e[0],i=e[1],o=x(i.subscribeCore).call(i,r);o!==C||r.fail(C.e)||D(C.e),r.setDisposable((n=o)&&m(n.dispose)?n:m(n)?St(n):At)}function e(){t.call(this)}return mt(e,t),e.prototype._subscribe=function(t){var e=new _r(t),n=[e,this];return $t.scheduleRequired()?$t.schedule(n,r):r(0,n),e},e.prototype.subscribeCore=I,e}(fe),ve=c.FlatMapObservable=function(i){function t(t,e,n,r){this.resultSelector=m(n)?n:null,this.selector=B(m(e)?e:function(){return e},r,3),this.source=t,i.call(this)}function e(t,e,n,r){this.i=0,this.selector=e,this.resultSelector=n,this.source=r,this.o=t,pe.call(this)}return mt(t,i),t.prototype.subscribeCore=function(t){return this.source.subscribe(new e(t,this.selector,this.resultSelector,this))},mt(e,pe),e.prototype._wrapResult=function(t,n,r){return this.resultSelector?t.map(function(t,e){return this.resultSelector(n,t,r,e)},this):t},e.prototype.next=function(t){var e=this.i++,n=x(this.selector)(t,e,this.source);if(n===C)return this.o.onError(n.e);w(n)&&(n=Hn(n)),(K(n)||U(n))&&(n=fe.from(n)),this.o.onNext(this._wrapResult(n,t,e))},e.prototype.error=function(t){this.o.onError(t)},e.prototype.completed=function(){this.o.onCompleted()},t}(be),_e=c.internals.Enumerable=function(){};function ye(t){this._s=t,this.isDisposed=!1}ye.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._s.isDisposed=!0)};var we=function(e){function t(t){this.sources=t,e.call(this)}function i(t,e){if(!t.isDisposed){var n=x(t.e.next).call(t.e);if(n===C)return t.o.onError(n.e);if(n.done)return t.o.onCompleted();var r=n.value;w(r)&&(r=Hn(r));var i=new Ft;t.subscription.setDisposable(i),i.setDisposable(r.subscribe(new o(t,e)))}}function o(t,e){this._state=t,this._recurse=e,pe.call(this)}return mt(t,e),t.prototype.subscribeCore=function(t){var e=new qt,n={isDisposed:!1,o:t,subscription:e,e:this.sources[W]()},r=$t.scheduleRecursive(n,i);return new Mt([e,r,new ye(n)])},mt(o,pe),o.prototype.next=function(t){this._state.o.onNext(t)},o.prototype.error=function(t){this._state.o.onError(t)},o.prototype.completed=function(){this._recurse(this._state)},t}(be);_e.prototype.concat=function(){return new we(this)};var me=function(e){function t(t){this.sources=t,e.call(this)}function i(t,e){if(!t.isDisposed){var n=x(t.e.next).call(t.e);if(n===C)return t.o.onError(n.e);if(n.done)return null!==t.lastError?t.o.onError(t.lastError):t.o.onCompleted();var r=n.value;w(r)&&(r=Hn(r));var i=new Ft;t.subscription.setDisposable(i),i.setDisposable(r.subscribe(new o(t,e)))}}function o(t,e){this._state=t,this._recurse=e,pe.call(this)}return mt(t,e),t.prototype.subscribeCore=function(t){var e=new qt,n={isDisposed:!1,e:this.sources[W](),subscription:e,lastError:null,o:t},r=$t.scheduleRecursive(n,i);return new Mt([e,r,new ye(n)])},mt(o,pe),o.prototype.next=function(t){this._state.o.onNext(t)},o.prototype.error=function(t){this._state.lastError=t,this._recurse(this._state)},o.prototype.completed=function(){this._state.o.onCompleted()},t}(be);_e.prototype.catchError=function(){return new me(this)};var ge=function(t){function e(t,e){this.v=t,this.c=null==e?-1:e}function n(t){this.v=t.v,this.l=t.c}return mt(e,_e),e.prototype[W]=function(){return new n(this)},n.prototype.next=function(){return 0===this.l?z:(0<this.l&&this.l--,{done:!1,value:this.v})},e}(),Ee=_e.repeat=function(t,e){return new ge(t,e)},Ce=function(t){function e(t,e,n){this.s=t,this.fn=e?B(e,n,3):null}function n(t){this.i=-1,this.s=t.s,this.l=this.s.length,this.fn=t.fn}return mt(e,_e),e.prototype[W]=function(){return new n(this)},n.prototype.next=function(){return++this.i<this.l?{done:!1,value:this.fn?this.fn(this.s[this.i],this.i,this.s):this.s[this.i]}:z},e}(),xe=_e.of=function(t,e,n){return new Ce(t,e,n)},De=function(e){function t(t){this.source=t,e.call(this)}function n(t){this.o=t,this.a=[],pe.call(this)}return mt(t,e),t.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t))},mt(n,pe),n.prototype.next=function(t){this.a.push(t)},n.prototype.error=function(t){this.o.onError(t)},n.prototype.completed=function(){this.o.onNext(this.a),this.o.onCompleted()},t}(be);ee.toArray=function(){return new De(this)},fe.create=function(t,e){return new vr(t,e)};var Ne=function(e){function t(t){this.scheduler=t,e.call(this)}function n(t,e){this.observer=t,this.scheduler=e}function r(t,e){return e.onCompleted(),At}return mt(t,e),t.prototype.subscribeCore=function(t){return new n(t,this.scheduler).run()},n.prototype.run=function(){var t=this.observer;return this.scheduler===Kt?r(0,t):this.scheduler.schedule(t,r)},t}(be),Se=new Ne(Kt),Ae=fe.empty=function(t){return It(t)||(t=Kt),t===Kt?Se:new Ne(t)},Oe=function(r){function t(t,e,n){this._iterable=t,this._fn=e,this._scheduler=n,r.call(this)}return mt(t,r),t.prototype.subscribeCore=function(t){var i,o,s,e=function(t){var e=t[W];if(!e&&"string"==typeof t)return new ke(t)[W]();if(!e&&t.length!==y)return new qe(t)[W]();if(!e)throw new TypeError("Object is not iterable");return t[W]()}(Object(this._iterable));return this._scheduler.scheduleRecursive(0,(i=t,o=e,s=this._fn,function(t,e){var n=x(o.next).call(o);if(n===C)return i.onError(n.e);if(n.done)return i.onCompleted();var r=n.value;if(m(s)&&(r=x(s)(r,t))===C)return i.onError(r.e);i.onNext(r),e(t+1)}))},t}(be),je=Math.pow(2,53)-1;function ke(t){this._s=t}function Fe(t){this._s=t,this._l=t.length,this._i=0}function qe(t){this._a=t}function Te(t){this._a=t,this._l=function(t){var e=+t.length;if(isNaN(e))return 0;if(0===e||(n=e,"number"!=typeof n||!p.isFinite(n)))return e;var n;if(r=e,i=+r,(e=(0===i?i:isNaN(i)?i:i<0?-1:1)*Math.floor(Math.abs(e)))<=0)return 0;var r,i;if(je<e)return je;return e}(t),this._i=0}ke.prototype[W]=function(){return new Fe(this._s)},Fe.prototype[W]=function(){return this},Fe.prototype.next=function(){return this._i<this._l?{done:!1,value:this._s.charAt(this._i++)}:z},qe.prototype[W]=function(){return new Te(this._a)},Te.prototype[W]=function(){return this},Te.prototype.next=function(){return this._i<this._l?{done:!1,value:this._a[this._i++]}:z};fe.from=function(t,e,n,r){if(null==t)throw new Error("iterable cannot be null.");if(e&&!m(e))throw new Error("mapFn when provided must be a function");if(e)var i=B(e,n,2);return It(r)||(r=$t),new Oe(t,i,r)};var Me=function(n){function t(t,e){this._args=t,this._scheduler=e,n.call(this)}return mt(t,n),t.prototype.subscribeCore=function(t){return this._scheduler.scheduleRecursive(0,(n=t,r=this._args,i=r.length,function(t,e){t<i?(n.onNext(r[t]),e(t+1)):n.onCompleted()}));var n,r,i},t}(be),Re=fe.fromArray=function(t,e){return It(e)||(e=$t),new Me(t,e)};fe.of=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new Me(e,$t)},fe.ofWithScheduler=function(t){for(var e=arguments.length,n=new Array(e-1),r=1;r<e;r++)n[r-1]=arguments[r];return new Me(n,t)};var Ve=function(r){function t(t,e,n){this.value=t,this.repeatCount=null==e?-1:e,this.scheduler=n,r.call(this)}return mt(t,r),t.prototype.subscribeCore=function(t){return new Le(t,this).run()},t}(be);function Le(t,e){this.observer=t,this.parent=e}Le.prototype.run=function(){var n=this.observer,r=this.parent.value;return this.parent.scheduler.scheduleRecursive(this.parent.repeatCount,function(t,e){if((-1===t||0<t)&&(n.onNext(r),0<t&&t--),0===t)return n.onCompleted();e(t)})},fe.repeat=function(t,e,n){return It(n)||(n=$t),new Ve(t,e,n)};var Pe=function(n){function t(t,e){this._value=t,this._scheduler=e,n.call(this)}function r(t,e){var n=e[0],r=e[1];return r.onNext(n),r.onCompleted(),At}return mt(t,n),t.prototype.subscribeCore=function(t){var e=[this._value,t];return this._scheduler===Kt?r(null,e):this._scheduler.schedule(e,r)},t}(be),Ie=(fe.return=fe.just=function(t,e){return It(e)||(e=Kt),new Pe(t,e)},function(n){function t(t,e){this.source=t,this._fn=e,n.call(this)}return mt(t,n),t.prototype.subscribeCore=function(t){var e=new Ft,n=new qt;return n.setDisposable(e),e.setDisposable(this.source.subscribe(new We(t,n,this._fn))),n},t}(be)),We=function(r){function t(t,e,n){this._o=t,this._s=e,this._fn=n,r.call(this)}return mt(t,r),t.prototype.next=function(t){this._o.onNext(t)},t.prototype.completed=function(){return this._o.onCompleted()},t.prototype.error=function(t){var e=x(this._fn)(t);if(e===C)return this._o.onError(e.e);w(e)&&(e=Hn(e));var n=new Ft;this._s.setDisposable(n),n.setDisposable(e.subscribe(this._o))},t}(pe);ee.catch=function(t){return m(t)?new Ie(this,t):ze([this,t])};var ze=fe.catch=function(){var t;if(Array.isArray(arguments[0]))t=arguments[0];else{var e=arguments.length;t=new Array(e);for(var n=0;n<e;n++)t[n]=arguments[n]}return xe(t).catchError()};function Ue(){return!1}function Ke(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e}ee.combineLatest=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Array.isArray(e[0])?e[0].unshift(this):e.unshift(this),He.apply(this,e)};var Be=function(n){function t(t,e){this._params=t,this._cb=e,n.call(this)}return mt(t,n),t.prototype.subscribeCore=function(t){for(var e=this._params.length,n=new Array(e),r={hasValue:Ct(e,Ue),hasValueAll:!1,isDone:Ct(e,Ue),values:new Array(e)},i=0;i<e;i++){var o=this._params[i],s=new Ft;n[i]=s,w(o)&&(o=Hn(o)),s.setDisposable(o.subscribe(new $e(t,i,this._cb,r)))}return new Mt(n)},t}(be),$e=function(i){function t(t,e,n,r){this._o=t,this._i=e,this._cb=n,this._state=r,i.call(this)}return mt(t,i),t.prototype.next=function(t){if(this._state.values[this._i]=t,this._state.hasValue[this._i]=!0,this._state.hasValueAll||(this._state.hasValueAll=this._state.hasValue.every(f))){var e=x(this._cb).apply(null,this._state.values);if(e===C)return this._o.onError(e.e);this._o.onNext(e)}else this._state.isDone.filter((n=this._i,function(t,e){return e!==n})).every(f)&&this._o.onCompleted();var n},t.prototype.error=function(t){this._o.onError(t)},t.prototype.completed=function(){this._state.isDone[this._i]=!0,this._state.isDone.every(f)&&this._o.onCompleted()},t}(pe),He=fe.combineLatest=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=m(e[t-1])?e.pop():Ke;return Array.isArray(e[0])&&(e=e[0]),new Be(e,r)};ee.concat=function(){for(var t=[],e=0,n=arguments.length;e<n;e++)t.push(arguments[e]);return t.unshift(this),Qe.apply(null,t)};var Ge=function(n){function t(t,e){this._s=t,this._fn=e,n.call(this)}return mt(t,n),t.prototype.next=function(t){this._s.o.onNext(t)},t.prototype.error=function(t){this._s.o.onError(t)},t.prototype.completed=function(){this._s.i++,this._fn(this._s)},t}(pe),Je=function(e){function t(t){this._sources=t,e.call(this)}function o(t,e){if(!t.disposable.isDisposed){if(t.i===t.sources.length)return t.o.onCompleted();var n=t.sources[t.i];w(n)&&(n=Hn(n));var r=new Ft;t.subscription.setDisposable(r),r.setDisposable(n.subscribe(new Ge(t,e)))}}return mt(t,e),t.prototype.subscribeCore=function(t){var e=new qt,n=St(l),r={o:t,i:0,subscription:e,disposable:n,sources:this._sources},i=Kt.scheduleRecursive(r,o);return new Mt([e,n,i])},t}(be),Qe=fe.concat=function(){var t;if(Array.isArray(arguments[0]))t=arguments[0];else{t=new Array(arguments.length);for(var e=0,n=arguments.length;e<n;e++)t[e]=arguments[e]}return new Je(t)},Xe=function(n){function t(t,e){this.source=t,this.maxConcurrent=e,n.call(this)}return mt(t,n),t.prototype.subscribeCore=function(t){var e=new xt;return e.add(this.source.subscribe(new Ye(t,this.maxConcurrent,e))),e},t}(be),Ye=function(r){function t(t,e,n){this.o=t,this.max=e,this.g=n,this.done=!1,this.q=[],this.activeCount=0,r.call(this)}function n(t,e){this.parent=t,this.sad=e,r.call(this)}return mt(t,r),t.prototype.handleSubscribe=function(t){var e=new Ft;this.g.add(e),w(t)&&(t=Hn(t)),e.setDisposable(t.subscribe(new n(this,e)))},t.prototype.next=function(t){this.activeCount<this.max?(this.activeCount++,this.handleSubscribe(t)):this.q.push(t)},t.prototype.error=function(t){this.o.onError(t)},t.prototype.completed=function(){this.done=!0,0===this.activeCount&&this.o.onCompleted()},mt(n,r),n.prototype.next=function(t){this.parent.o.onNext(t)},n.prototype.error=function(t){this.parent.o.onError(t)},n.prototype.completed=function(){this.parent.g.remove(this.sad),0<this.parent.q.length?this.parent.handleSubscribe(this.parent.q.shift()):(this.parent.activeCount--,this.parent.done&&0===this.parent.activeCount&&this.parent.o.onCompleted())},t}(pe);ee.merge=function(t){return"number"!=typeof t?en(this,t):new Xe(this,t)};var Ze=function(e){function t(t){this.source=t,e.call(this)}return mt(t,e),t.prototype.subscribeCore=function(t){var e=new xt,n=new Ft;return e.add(n),n.setDisposable(this.source.subscribe(new tn(t,e))),e},t}(be),tn=function(n){function t(t,e){this.o=t,this.g=e,this.done=!1,n.call(this)}function r(t,e){this.parent=t,this.sad=e,n.call(this)}return mt(t,n),t.prototype.next=function(t){var e=new Ft;this.g.add(e),w(t)&&(t=Hn(t)),e.setDisposable(t.subscribe(new r(this,e)))},t.prototype.error=function(t){this.o.onError(t)},t.prototype.completed=function(){this.done=!0,1===this.g.length&&this.o.onCompleted()},mt(r,n),r.prototype.next=function(t){this.parent.o.onNext(t)},r.prototype.error=function(t){this.parent.o.onError(t)},r.prototype.completed=function(){this.parent.g.remove(this.sad),this.parent.done&&1===this.parent.g.length&&this.parent.o.onCompleted()},t}(pe);ee.mergeAll=function(){return new Ze(this)};var en=fe.merge=function(){var t,e,n,r,i=[],o=arguments.length;if(arguments[0])if(It(arguments[0]))for(t=arguments[0],e=1;e<o;e++)i.push(arguments[e]);else for(t=Kt,e=0;e<o;e++)i.push(arguments[e]);else for(t=Kt,e=1;e<o;e++)i.push(arguments[e]);return Array.isArray(i[0])&&(i=i[0]),(n=t,r=i,It(n)||(n=$t),new Me(r,n)).mergeAll()},nn=function(n){function t(t,e){this._s=t,this._o=w(e)?Hn(e):e,this._open=!1,n.call(this)}return mt(t,n),t.prototype.subscribeCore=function(t){var e=new Ft;e.setDisposable(this._s.subscribe(new rn(t,this))),w(this._o)&&(this._o=Hn(this._o));var n=new Ft;return n.setDisposable(this._o.subscribe(new on(t,this,n))),new Tt(e,n)},t}(be),rn=function(n){function t(t,e){this._o=t,this._p=e,n.call(this)}return mt(t,n),t.prototype.next=function(t){this._p._open&&this._o.onNext(t)},t.prototype.error=function(t){this._o.onError(t)},t.prototype.onCompleted=function(){this._p._open&&this._o.onCompleted()},t}(pe),on=function(r){function t(t,e,n){this._o=t,this._p=e,this._r=n,r.call(this)}return mt(t,r),t.prototype.next=function(){this._p._open=!0,this._r.dispose()},t.prototype.error=function(t){this._o.onError(t)},t.prototype.onCompleted=function(){this._r.dispose()},t}(pe);ee.skipUntil=function(t){return new nn(this,t)};var sn=function(n){function t(t,e){this.source=t,this.other=w(e)?Hn(e):e,n.call(this)}return mt(t,n),t.prototype.subscribeCore=function(t){return new Tt(this.source.subscribe(t),this.other.subscribe(new un(t)))},t}(be),un=function(e){function t(t){this._o=t,e.call(this)}return mt(t,e),t.prototype.next=function(){this._o.onCompleted()},t.prototype.error=function(t){this._o.onError(t)},t.prototype.onCompleted=l,t}(pe);function Ue(){return!1}function Ke(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e}ee.takeUntil=function(t){return new sn(this,t)};var cn=function(r){function t(t,e,n){this._s=t,this._ss=e,this._cb=n,r.call(this)}return mt(t,r),t.prototype.subscribeCore=function(t){for(var e=this._ss.length,n={hasValue:Ct(e,Ue),hasValueAll:!1,values:new Array(e)},r=this._ss.length,i=new Array(r+1),o=0;o<r;o++){var s=this._ss[o],u=new Ft;w(s)&&(s=Hn(s)),u.setDisposable(s.subscribe(new hn(t,o,n))),i[o]=u}var c=new Ft;return c.setDisposable(this._s.subscribe(new an(t,this._cb,n))),i[r]=c,new Mt(i)},t}(be),hn=function(r){function t(t,e,n){this._o=t,this._i=e,this._state=n,r.call(this)}return mt(t,r),t.prototype.next=function(t){this._state.values[this._i]=t,this._state.hasValue[this._i]=!0,this._state.hasValueAll=this._state.hasValue.every(f)},t.prototype.error=function(t){this._o.onError(t)},t.prototype.completed=l,t}(pe),an=function(r){function t(t,e,n){this._o=t,this._cb=e,this._state=n,r.call(this)}return mt(t,r),t.prototype.next=function(t){var e=[t].concat(this._state.values);if(this._state.hasValueAll){var n=x(this._cb).apply(null,e);if(n===C)return this._o.onError(n.e);this._o.onNext(n)}},t.prototype.error=function(t){this._o.onError(t)},t.prototype.completed=function(){this._o.onCompleted()},t}(pe);function Ue(){return!1}function pn(){return[]}ee.withLatestFrom=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=m(e[t-1])?e.pop():Ke;return Array.isArray(e[0])&&(e=e[0]),new cn(this,e,r)};var ln=function(n){function t(t,e){this._s=t,this._cb=e,n.call(this)}return mt(t,n),t.prototype.subscribeCore=function(t){for(var e=this._s.length,n=new Array(e),r=Ct(e,Ue),i=Ct(e,pn),o=0;o<e;o++){var s=this._s[o],u=new Ft;n[o]=u,w(s)&&(s=Hn(s)),u.setDisposable(s.subscribe(new fn(t,o,this,i,r)))}return new Mt(n)},t}(be),fn=function(o){function t(t,e,n,r,i){this._o=t,this._i=e,this._p=n,this._q=r,this._d=i,o.call(this)}function i(t){return 0<t.length}function s(t){return t.shift()}return mt(t,o),t.prototype.next=function(t){if(this._q[this._i].push(t),this._q.every(i)){var e=this._q.map(s),n=x(this._p._cb).apply(null,e);if(n===C)return this._o.onError(n.e);this._o.onNext(n)}else this._d.filter((r=this._i,function(t,e){return e!==r})).every(f)&&this._o.onCompleted();var r},t.prototype.error=function(t){this._o.onError(t)},t.prototype.completed=function(){this._d[this._i]=!0,this._d.every(f)&&this._o.onCompleted()},t}(pe);ee.zip=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=m(e[t-1])?e.pop():Ke;Array.isArray(e[0])&&(e=e[0]);return e.unshift(this),new ln(e,r)},fe.zip=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Array.isArray(e[0])&&(e=m(e[1])?e[0].concat(e[1]):e[0]);var r=e.shift();return r.zip.apply(r,e)};var dn=function(e){function t(t){this.source=t,e.call(this)}function r(t,e){this.o=t,this.inner=e,this.stopped=!1,this.latest=0,this.hasLatest=!1,pe.call(this)}function i(t,e){this.parent=t,this.id=e,pe.call(this)}return mt(t,e),t.prototype.subscribeCore=function(t){var e=new qt,n=this.source.subscribe(new r(t,e));return new Tt(n,e)},mt(r,pe),r.prototype.next=function(t){var e=new Ft,n=++this.latest;this.hasLatest=!0,this.inner.setDisposable(e),w(t)&&(t=Hn(t)),e.setDisposable(t.subscribe(new i(this,n)))},r.prototype.error=function(t){this.o.onError(t)},r.prototype.completed=function(){this.stopped=!0,!this.hasLatest&&this.o.onCompleted()},mt(i,pe),i.prototype.next=function(t){this.parent.latest===this.id&&this.parent.o.onNext(t)},i.prototype.error=function(t){this.parent.latest===this.id&&this.parent.o.onError(t)},i.prototype.completed=function(){this.parent.latest===this.id&&(this.parent.hasLatest=!1,this.parent.stopped&&this.parent.o.onCompleted())},t}(be);function bn(t){return t.toArray()}function vn(t){return 0<t.length}ee.switch=ee.switchLatest=function(){return new dn(this)},ee.asObservable=function(){return new vr((e=this,function(t){return e.subscribe(t)}),this);var e},ee.bufferWithCount=ee.bufferCount=function(t,e){return"number"!=typeof e&&(e=t),this.windowWithCount(t,e).flatMap(bn).filter(vn)};var _n=function(r){function t(t,e,n){this.source=t,this.keyFn=e,this.comparer=n,r.call(this)}return mt(t,r),t.prototype.subscribeCore=function(t){return this.source.subscribe(new yn(t,this.keyFn,this.comparer))},t}(be),yn=function(r){function t(t,e,n){this.o=t,this.keyFn=e,this.comparer=n,this.hasCurrentKey=!1,this.currentKey=null,r.call(this)}return mt(t,r),t.prototype.next=function(t){var e,n=t;return m(this.keyFn)&&(n=x(this.keyFn)(t))===C?this.o.onError(n.e):this.hasCurrentKey&&(e=x(this.comparer)(this.currentKey,n))===C?this.o.onError(e.e):void(this.hasCurrentKey&&e||(this.hasCurrentKey=!0,this.currentKey=n,this.o.onNext(t)))},t.prototype.error=function(t){this.o.onError(t)},t.prototype.completed=function(){this.o.onCompleted()},t}(pe);ee.distinctUntilChanged=function(t,e){return e||(e=b),new _n(this,t,e)};var wn=function(i){function t(t,e,n,r){this.source=t,this._oN=e,this._oE=n,this._oC=r,i.call(this)}function e(t,e){this.o=t,this.t=!e._oN||m(e._oN)?ae(e._oN||l,e._oE||l,e._oC||l):e._oN,this.isStopped=!1,pe.call(this)}return mt(t,i),t.prototype.subscribeCore=function(t){return this.source.subscribe(new e(t,this))},mt(e,pe),e.prototype.next=function(t){var e=x(this.t.onNext).call(this.t,t);e===C&&this.o.onError(e.e),this.o.onNext(t)},e.prototype.error=function(t){var e=x(this.t.onError).call(this.t,t);if(e===C)return this.o.onError(e.e);this.o.onError(t)},e.prototype.completed=function(){var t=x(this.t.onCompleted).call(this.t);if(t===C)return this.o.onError(t.e);this.o.onCompleted()},t}(be);ee.do=ee.tap=ee.doAction=function(t,e,n){return new wn(this,t,e,n)},ee.doOnNext=ee.tapOnNext=function(e,n){return this.tap(void 0!==n?function(t){e.call(n,t)}:e)},ee.doOnError=ee.tapOnError=function(e,n){return this.tap(l,void 0!==n?function(t){e.call(n,t)}:e)},ee.doOnCompleted=ee.tapOnCompleted=function(t,e){return this.tap(l,null,void 0!==e?function(){t.call(e)}:t)};var mn=function(r){function t(t,e,n){this.source=t,this._fn=B(e,n,0),r.call(this)}function n(t,e){this.isDisposed=!1,this._s=t,this._fn=e}return mt(t,r),t.prototype.subscribeCore=function(t){var e=x(this.source.subscribe).call(this.source,t);return e===C&&(this._fn(),D(e.e)),new n(e,this._fn)},n.prototype.dispose=function(){if(!this.isDisposed){var t=x(this._s.dispose).call(this._s);this._fn(),t===C&&D(t.e)}},t}(be);ee.finally=function(t,e){return new mn(this,t,e)},ee.retry=function(t){return Ee(this,t).catchError()};var gn=function(i){function t(t,e,n,r){this.source=t,this.accumulator=e,this.hasSeed=n,this.seed=r,i.call(this)}return mt(t,i),t.prototype.subscribeCore=function(t){return this.source.subscribe(new En(t,this))},t}(be),En=function(n){function t(t,e){this._o=t,this._p=e,this._fn=e.accumulator,this._hs=e.hasSeed,this._s=e.seed,this._ha=!1,this._a=null,this._hv=!1,this._i=0,n.call(this)}return mt(t,n),t.prototype.next=function(t){if(!this._hv&&(this._hv=!0),this._ha?this._a=x(this._fn)(this._a,t,this._i,this._p):(this._a=this._hs?x(this._fn)(this._s,t,this._i,this._p):t,this._ha=!0),this._a===C)return this._o.onError(this._a.e);this._o.onNext(this._a),this._i++},t.prototype.error=function(t){this._o.onError(t)},t.prototype.completed=function(){!this._hv&&this._hs&&this._o.onNext(this._s),this._o.onCompleted()},t}(pe);ee.scan=function(){var t,e=!1,n=arguments[0];return 2===arguments.length&&(e=!0,t=arguments[1]),new gn(this,n,e,t)},ee.startWith=function(){var t,e=0;arguments.length&&It(arguments[0])?(t=arguments[0],e=1):t=Kt;for(var n=[],r=e,i=arguments.length;r<i;r++)n.push(arguments[r]);return Qe.apply(null,[Re(n,t),this])},ee.windowWithCount=ee.windowCount=function(u,c){var r=this;if(+u||(u=0),Math.abs(u)===1/0&&(u=0),u<=0)throw new V;if(null==c&&(c=u),+c||(c=0),Math.abs(c)===1/0&&(c=0),c<=0)throw new V;return new vr(function(e){var t=new Ft,n=new Rt(t),i=0,o=[];function s(){var t=new wr;o.push(t),e.onNext(Et(t,n))}return s(),t.setDisposable(r.subscribe(function(t){for(var e=0,n=o.length;e<n;e++)o[e].onNext(t);var r=i-u+1;0<=r&&r%c==0&&o.shift().onCompleted(),++i%c==0&&s()},function(t){for(;0<o.length;)o.shift().onError(t);e.onError(t)},function(){for(;0<o.length;)o.shift().onCompleted();e.onCompleted()})),n},r)};var Cn=function(n){function t(t,e){this.source=t,n.call(this)}return mt(t,n),t.prototype.subscribeCore=function(t){return this.source.subscribe(new xn(t))},t}(be),xn=function(e){function t(t){this._o=t,e.call(this)}return mt(t,e),t.prototype.next=function(t){this._o.onNext(se(t))},t.prototype.error=function(t){this._o.onNext(ue(t)),this._o.onCompleted()},t.prototype.completed=function(){this._o.onNext(ce()),this._o.onCompleted()},t}(pe);ee.materialize=function(){return new Cn(this)};var Dn=function(r){function n(t,e,n){this.source=t,this.selector=B(e,n,3),r.call(this)}function e(t,e,n){this.o=t,this.selector=e,this.source=n,this.i=0,pe.call(this)}return mt(n,r),n.prototype.internalMap=function(t,e){return new n(this.source,(r=t,i=this,function(t,e,n){return r.call(this,i.selector(t,e,n),e,n)}),e);var r,i},n.prototype.subscribeCore=function(t){return this.source.subscribe(new e(t,this.selector,this))},mt(e,pe),e.prototype.next=function(t){var e=x(this.selector)(t,this.i++,this.source);if(e===C)return this.o.onError(e.e);this.o.onNext(e)},e.prototype.error=function(t){this.o.onError(t)},e.prototype.completed=function(){this.o.onCompleted()},n}(be);ee.map=ee.select=function(t,e){var n="function"==typeof t?t:function(){return t};return this instanceof Dn?this.internalMap(n,e):new Dn(this,n,e)},ee.pluck=function(){var i,o,t=arguments.length,e=new Array(t);if(0===t)throw new Error("List of properties cannot be empty.");for(var n=0;n<t;n++)e[n]=arguments[n];return this.map((i=e,o=t,function(t){for(var e=t,n=0;n<o;n++){var r=e[i[n]];if(void 0===r)return y;e=r}return e}))},ee.flatMap=ee.selectMany=ee.mergeMap=function(t,e,n){return new ve(this,t,e,n).mergeAll()},ee.flatMapLatest=ee.switchMap=function(t,e,n){return new ve(this,t,e,n).switchLatest()},ee.flatMapObserver=ee.selectManyObserver=function(i,o,e,s){var t=this;return new vr(function(n){var r=0;return t.subscribe(function(t){var e;try{e=i.call(s,t,r++)}catch(t){return void n.onError(t)}w(e)&&(e=Hn(e)),n.onNext(e)},function(t){var e;try{e=o.call(s,t)}catch(t){return void n.onError(t)}w(e)&&(e=Hn(e)),n.onNext(e),n.onCompleted()},function(){var t;try{t=e.call(s)}catch(t){return void n.onError(t)}w(t)&&(t=Hn(t)),n.onNext(t),n.onCompleted()})},t).mergeAll()};var Nn=function(n){function t(t,e){this.source=t,this._count=e,n.call(this)}function e(t,e){this._o=t,this._r=e,pe.call(this)}return mt(t,n),t.prototype.subscribeCore=function(t){return this.source.subscribe(new e(t,this._count))},mt(e,pe),e.prototype.next=function(t){this._r<=0?this._o.onNext(t):this._r--},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},t}(be);ee.skip=function(t){if(t<0)throw new V;return new Nn(this,t)};var Sn=function(n){function t(t,e){this.source=t,this._fn=e,n.call(this)}return mt(t,n),t.prototype.subscribeCore=function(t){return this.source.subscribe(new An(t,this))},t}(be),An=function(n){function t(t,e){this._o=t,this._p=e,this._i=0,this._r=!1,n.call(this)}return mt(t,n),t.prototype.next=function(t){if(!this._r){var e=x(this._p._fn)(t,this._i++,this._p);if(e===C)return this._o.onError(e.e);this._r=!e}this._r&&this._o.onNext(t)},t.prototype.error=function(t){this._o.onError(t)},t.prototype.completed=function(){this._o.onCompleted()},t}(pe);ee.skipWhile=function(t,e){var n=B(t,e,3);return new Sn(this,n)};var On=function(n){function t(t,e){this.source=t,this._count=e,n.call(this)}function e(t,e){this._o=t,this._c=e,this._r=e,pe.call(this)}return mt(t,n),t.prototype.subscribeCore=function(t){return this.source.subscribe(new e(t,this._count))},mt(e,pe),e.prototype.next=function(t){0<this._r--&&(this._o.onNext(t),this._r<=0&&this._o.onCompleted())},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},t}(be);ee.take=function(t,e){if(t<0)throw new V;return 0===t?Ae(e):new On(this,t)};var jn=function(n){function t(t,e){this.source=t,this._fn=e,n.call(this)}return mt(t,n),t.prototype.subscribeCore=function(t){return this.source.subscribe(new kn(t,this))},t}(be),kn=function(n){function t(t,e){this._o=t,this._p=e,this._i=0,this._r=!0,n.call(this)}return mt(t,n),t.prototype.next=function(t){if(this._r&&(this._r=x(this._p._fn)(t,this._i++,this._p),this._r===C))return this._o.onError(this._r.e);this._r?this._o.onNext(t):this._o.onCompleted()},t.prototype.error=function(t){this._o.onError(t)},t.prototype.completed=function(){this._o.onCompleted()},t}(pe);ee.takeWhile=function(t,e){var n=B(t,e,3);return new jn(this,n)};var Fn=function(r){function n(t,e,n){this.source=t,this.predicate=B(e,n,3),r.call(this)}function e(t,e,n){this.o=t,this.predicate=e,this.source=n,this.i=0,pe.call(this)}return mt(n,r),n.prototype.subscribeCore=function(t){return this.source.subscribe(new e(t,this.predicate,this))},n.prototype.internalFilter=function(t,e){return new n(this.source,(r=t,i=this,function(t,e,n){return i.predicate(t,e,n)&&r.call(this,t,e,n)}),e);var r,i},mt(e,pe),e.prototype.next=function(t){var e=x(this.predicate)(t,this.i++,this.source);if(e===C)return this.o.onError(e.e);e&&this.o.onNext(t)},e.prototype.error=function(t){this.o.onError(t)},e.prototype.completed=function(){this.o.onCompleted()},n}(be);function qn(t){this.comparer=t,this.set=[]}ee.filter=ee.where=function(t,e){return this instanceof Fn?this.internalFilter(t,e):new Fn(this,t,e)},qn.prototype.push=function(t){var e=-1===function(t,e,n){for(var r=0,i=t.length;r<i;r++)if(n(t[r],e))return r;return-1}(this.set,t,this.comparer);return e&&this.set.push(t),e};var Tn=function(r){function t(t,e,n){this.source=t,this._keyFn=e,this._cmpFn=n,r.call(this)}return mt(t,r),t.prototype.subscribeCore=function(t){return this.source.subscribe(new Mn(t,this._keyFn,this._cmpFn))},t}(be),Mn=function(r){function t(t,e,n){this._o=t,this._keyFn=e,this._h=new qn(n),r.call(this)}return mt(t,r),t.prototype.next=function(t){var e=t;if(m(this._keyFn)&&(e=x(this._keyFn)(t))===C)return this._o.onError(e.e);this._h.push(e)&&this._o.onNext(t)},t.prototype.error=function(t){this._o.onError(t)},t.prototype.completed=function(){this._o.onCompleted()},t}(pe);ee.distinct=function(t,e){return e||(e=b),new Tn(this,t,e)};var Rn=function(n){function t(t,e){this.source=t,this._obj=e,n.call(this)}return mt(t,n),t.prototype.subscribeCore=function(t){return this.source.subscribe(new Vn(t,this._obj,this.source))},t}(be),Vn=function(r){function t(t,e,n){this._o=t,this._obj=e,this._s=n,this._i=0,r.call(this)}return mt(t,r),t.prototype.next=function(t){if(this._obj.predicate){var e=x(this._obj.predicate)(t,this._i++,this._s);if(e===C)return this._o.onError(e.e);Boolean(e)&&(this._o.onNext(t),this._o.onCompleted())}else this._obj.predicate||(this._o.onNext(t),this._o.onCompleted())},t.prototype.error=function(t){this._o.onError(t)},t.prototype.completed=function(){this._obj.defaultValue===y?this._o.onError(new M):(this._o.onNext(this._obj.defaultValue),this._o.onCompleted())},t}(pe);ee.first=function(){var t={};if(t="object"==typeof arguments[0]?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]},m(t.predicate)){var e=t.predicate;t.predicate=B(e,t.thisArg,3)}return new Rn(this,t)},fe.wrap=function(t){function e(){return fe.spawn.call(this,t.apply(this,arguments))}return e.__generatorFunction__=t,e};var Ln=fe.spawn=function(){for(var r=arguments[0],c=this,t=[],e=1,n=arguments.length;e<n;e++)t.push(arguments[e]);return new vr(function(i){var o=new xt;if(m(r)&&(r=r.apply(c,t)),!r||!m(r.next))return i.onNext(r),i.onCompleted();function s(t){var e=x(r.next).call(r,t);if(e===C)return i.onError(e.e);n(e)}function u(t){var e=x(r.next).call(r,t);if(e===C)return i.onError(e.e);n(e)}function n(t){if(t.done)return i.onNext(t.value),void i.onCompleted();var e=Pn.call(c,t.value),n=null,r=!1;fe.isObservable(e)?o.add(e.subscribe(function(t){r=!0,n=t},u,function(){r&&s(n)})):u(new TypeError("type not supported"))}return s(),o})};function Pn(t){return t?fe.isObservable(t)?t:w(t)?fe.fromPromise(t):function(t){var e=t.constructor;if(!e)return!1;if("GeneratorFunction"===e.name||"GeneratorFunction"===e.displayName)return!0;return In(e.prototype)}(t)||In(t)?Ln.call(this,t):m(t)?function(t){var e=this;return new vr(function(o){t.call(e,function(){var t=arguments[0],e=arguments[1];if(t)return o.onError(t);if(2<arguments.length){for(var n=[],r=1,i=arguments.length;r<i;r++)n.push(arguments[r]);e=n}o.onNext(e),o.onCompleted()})})}.call(this,t):K(t)||U(t)?function(t){return fe.from(t).concatMap(function(t){return fe.isObservable(t)||pt(t)?Pn.call(null,t):c.Observable.just(t)}).toArray()}.call(this,t):pt(t)?function(t){for(var n=new t.constructor,e=Object.keys(t),r=[],i=0,o=e.length;i<o;i++){var s=e[i],u=Pn.call(this,t[s]);u&&fe.isObservable(u)?c(u,s):n[s]=t[s]}return fe.forkJoin.apply(fe,r).map(function(){return n});function c(t,e){n[e]=y,r.push(t.map(function(t){n[e]=t}))}}.call(this,t):t:t}function In(t){return m(t.next)&&m(t.throw)}function pt(t){return Object==t.constructor}function Wn(t,e,n,r){var i,o,s,u=new E;return r.push((i=u,o=e,s=n,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(m(s)){if((e=x(s).apply(o,e))===C)return i.onError(e.e);i.onNext(e)}else e.length<=1?i.onNext(e[0]):i.onNext(e);i.onCompleted()})),t.apply(e,r),u.asObservable()}function zn(t,e,n,r){var i,o,s,u=new E;return r.push((i=u,o=e,s=n,function(){var t=arguments[0];if(t)return i.onError(t);for(var e=arguments.length,n=[],r=1;r<e;r++)n[r-1]=arguments[r];if(m(s)){var n=x(s).apply(o,n);if(n===C)return i.onError(n.e);i.onNext(n)}else n.length<=1?i.onNext(n[0]):i.onNext(n);i.onCompleted()})),t.apply(e,r),u.asObservable()}function Un(t,e,n){this._e=t,this._n=e,this._fn=n,this._e.addEventListener(this._n,this._fn,!1),this.isDisposed=!1}function Kn(t,e,n){var r,i=new xt,o=Object.prototype.toString.call(t);if(r=t,(p.StaticNodeList?r instanceof p.StaticNodeList||r instanceof p.NodeList:"[object NodeList]"===Object.prototype.toString.call(r))||"[object HTMLCollection]"===o)for(var s=0,u=t.length;s<u;s++)i.add(Kn(t.item(s),e,n));else t&&i.add(new Un(t,e,n));return i}fe.fromCallback=function(r,i,o){return function(){void 0===i&&(i=this);for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Wn(r,i,o,e)}},fe.fromNodeCallback=function(r,i,o){return function(){void 0===i&&(i=this);for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return zn(r,i,o,e)}},Un.prototype.dispose=function(){this.isDisposed||(this._e.removeEventListener(this._n,this._fn,!1),this.isDisposed=!0)},c.config.useNativeEvents=!1;var Bn=function(r){function t(t,e,n){this._el=t,this._n=e,this._fn=n,r.call(this)}return mt(t,r),t.prototype.subscribeCore=function(t){return Kn(this._el,this._n,(e=t,n=this._fn,function(){var t=arguments[0];if(m(n)&&(t=x(n).apply(null,arguments))===C)return e.onError(t.e);e.onNext(t)}));var e,n},t}(be);fe.fromEvent=function(e,n,t,r){return e.addListener?fromEventPattern(function(t){e.addListener(n,t,r)},function(t){e.removeListener(n,t,r)},t):c.config.useNativeEvents||"function"!=typeof e.on||"function"!=typeof e.off?new Bn(e,n,t).publish().refCount():fromEventPattern(function(t){e.on(n,t,r)},function(t){e.off(n,t,r)},t)};var $n=function(n){function t(t,e){this._p=t,this._s=e,n.call(this)}function i(t,e){var n=e[0],r=e[1];n.onNext(r),n.onCompleted()}function o(t,e){var n=e[0],r=e[1];n.onError(r)}return mt(t,n),t.prototype.subscribeCore=function(e){var n=new Ft,r=this,t=this._p;return m(t)&&(t=x(t)())===C?e.onError(t.e):t.then(function(t){n.setDisposable(r._s.schedule([e,t],i))},function(t){n.setDisposable(r._s.schedule([e,t],o))}),n},t}(be),Hn=fe.fromPromise=function(t,e){return e||(e=Xt),new $n(t,e)},Gn=function(r){function t(t,e,n){this.source=t,this._fn1=e,this._fn2=n,r.call(this)}return mt(t,r),t.prototype.subscribeCore=function(t){var e=this.source.multicast(this._fn1());return new Tt(this._fn2(e).subscribe(t),e.connect())},t}(be);ee.multicast=function(t,e){return m(t)?new Gn(this,t,e):new Qn(this,t)},ee.publish=function(t){return t&&m(t)?this.multicast(function(){return new wr},t):this.multicast(new wr)},ee.share=function(){return this.publish().refCount()},ee.shareValue=function(t){return this.publishValue(t).refCount()},ee.replay=function(t,e,n,r){return t&&m(t)?this.multicast(function(){return new mr(e,n,r)},t):this.multicast(new mr(e,n,r))},ee.shareReplay=function(t,e,n){return this.replay(null,t,e,n).refCount()};var Jn=function(e){function t(t){this.source=t,this._count=0,this._connectableSubscription=null,e.call(this)}function n(t,e){this._p=t,this._s=e,this.isDisposed=!1}return mt(t,e),t.prototype.subscribeCore=function(t){var e=this.source.subscribe(t);return 1==++this._count&&(this._connectableSubscription=this.source.connect()),new n(this,e)},n.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._s.dispose(),0==--this._p._count&&this._p._connectableSubscription.dispose())},t}(be),Qn=c.ConnectableObservable=function(n){function t(t,e){this.source=t,this._connection=null,this._source=t.asObservable(),this._subject=e,n.call(this)}function e(t,e){this._p=t,this._s=e}return mt(t,n),e.prototype.dispose=function(){this._s&&(this._s.dispose(),this._s=null,this._p._connection=null)},t.prototype.connect=function(){if(!this._connection){if(this._subject.isStopped)return At;var t=this._source.subscribe(this._subject);this._connection=new e(this,t)}return this._connection},t.prototype._subscribe=function(t){return this._subject.subscribe(t)},t.prototype.refCount=function(){return new Jn(this)},t}(fe),Xn=function(e){function t(t){this.source=t,e.call(this)}return mt(t,e),t.prototype.subscribeCore=function(t){return this.source.subscribe(new Yn(t))},t}(be),Yn=function(e){function t(t){this._o=t,this._p=null,this._hp=!1,e.call(this)}return mt(t,e),t.prototype.next=function(t){this._hp?this._o.onNext([this._p,t]):this._hp=!0,this._p=t},t.prototype.error=function(t){this._o.onError(t)},t.prototype.completed=function(){this._o.onCompleted()},t}(pe);ee.pairwise=function(){return new Xn(this)},fe.for=fe.forIn=function(t,e,n){return xe(t,e,n).concat()};var Zn=function(n){function t(t,e){this._dt=t,this._s=e,n.call(this)}function e(t,e){e.onNext(0),e.onCompleted()}return mt(t,n),t.prototype.subscribeCore=function(t){return this._s.scheduleFuture(t,this._dt,e)},t}(be);function tr(t,e,s){return new vr(function(r){var i=t,o=Pt(e);return s.scheduleRecursiveFuture(0,i,function(t,e){if(0<o){var n=s.now();(i=new Date(i.getTime()+o)).getTime()<=n&&(i=new Date(n+o))}r.onNext(t),e(t+1,new Date(i))})})}function er(t,n,r){return t===n?new vr(function(e){return r.schedulePeriodic(0,n,function(t){return e.onNext(t),t+1})}):observableDefer(function(){return tr(new Date(r.now()+t),n,r)})}var nr=fe.interval=function(t,e){return er(t,t,It(e)?e:Xt)},rr=function(n){function t(t,e){this.source=t,this._s=e,n.call(this)}return mt(t,n),t.prototype.subscribeCore=function(t){return this.source.subscribe(new ir(t,this._s))},t}(be),ir=function(n){function t(t,e){this._o=t,this._s=e,this._l=e.now(),n.call(this)}return mt(t,n),t.prototype.next=function(t){var e=this._s.now(),n=e-this._l;this._l=e,this._o.onNext({value:t,interval:n})},t.prototype.error=function(t){this._o.onError(t)},t.prototype.completed=function(){this._o.onCompleted()},t}(pe);ee.timeInterval=function(t){return It(t)||(t=Xt),new rr(this,t)};fe.timer=function(t,e,n){var r;return It(n)||(n=Xt),null!=e&&"number"==typeof e?r=e:It(e)&&(n=e),(t instanceof Date||"number"==typeof t)&&r===y?new Zn(t,n):t instanceof Date&&r!==y?tr(t,e,n):er(t,r,n)};function or(e,i,p){return new vr(function(s){var t,u=!1,r=new qt,c=null,h=[],a=!1;return t=e.materialize().timestamp(p).subscribe(function(t){var e,n;"E"===t.value.kind?((h=[]).push(t),c=t.value.error,n=!a):(h.push({value:t.value,timestamp:t.timestamp+i}),n=!u,u=!0),n&&(null!==c?s.onError(c):(e=new Ft,r.setDisposable(e),e.setDisposable(p.scheduleRecursiveFuture(null,i,function(t,e){var n,r,i,o;if(null===c){for(a=!0;i=null,0<h.length&&h[0].timestamp-p.now()<=0&&(i=h.shift().value),null!==i&&i.accept(s),null!==i;);o=!1,(r=0)<h.length?(o=!0,r=Math.max(0,h[0].timestamp-p.now())):u=!1,a=!1,null!==(n=c)?s.onError(n):o&&e(null,r)}}))))}),new Tt(t,r)},e)}ee.delay=function(){var s,t,e,u,c,n,r,i,o=arguments[0];if("number"==typeof o||o instanceof Date){var h=o,a=arguments[1];return It(a)||(a=Xt),h instanceof Date?(n=this,r=h,i=a,observableDefer(function(){return or(n,r-i.now(),i)})):or(this,h,a)}if(fe.isObservable(o)||m(o))return s=this,t=o,e=arguments[1],m(t)?c=t:(u=t,c=e),new vr(function(r){var i=new xt,t=!1,e=new qt;function n(){e.setDisposable(s.subscribe(function(t){var e=x(c)(t);if(e===C)return r.onError(e.e);var n=new Ft;i.add(n),n.setDisposable(e.subscribe(function(){r.onNext(t),i.remove(n),o()},function(t){r.onError(t)},function(){r.onNext(t),i.remove(n),o()}))},function(t){r.onError(t)},function(){t=!0,e.dispose(),o()}))}function o(){t&&0===i.length&&r.onCompleted()}return u?e.setDisposable(u.subscribe(n,function(t){r.onError(t)},n)):n(),new Tt(e,i)},s);throw new Error("Invalid arguments")};var sr=function(r){function t(t,e,n){It(n)||(n=Xt),this.source=t,this._dt=e,this._s=n,r.call(this)}return mt(t,r),t.prototype.subscribeCore=function(t){var e=new qt;return new Tt(this.source.subscribe(new ur(t,this._dt,this._s,e)),e)},t}(be),ur=function(i){function t(t,e,n,r){this._o=t,this._d=e,this._scheduler=n,this._c=r,this._v=null,this._hv=!1,this._id=0,i.call(this)}return mt(t,i),t.prototype.next=function(n){this._hv=!0,this._v=n;var r=++this._id,t=new Ft;this._c.setDisposable(t),t.setDisposable(this._scheduler.scheduleFuture(this,this._d,function(t,e){e._hv&&e._id===r&&e._o.onNext(n),e._hv=!1}))},t.prototype.error=function(t){this._c.dispose(),this._o.onError(t),this._hv=!1,this._id++},t.prototype.completed=function(){this._c.dispose(),this._hv&&this._o.onNext(this._v),this._o.onCompleted(),this._hv=!1,this._id++},t}(pe);function bn(t){return t.toArray()}ee.debounce=function(){if(m(arguments[0]))return e=this,h=arguments[0],new vr(function(i){var o,s=!1,u=new qt,c=0,t=e.subscribe(function(t){var e=x(h)(t);if(e===C)return i.onError(e.e);w(e)&&(e=Hn(e)),s=!0,o=t;var n=++c,r=new Ft;u.setDisposable(r),r.setDisposable(e.subscribe(function(){s&&c===n&&i.onNext(o),s=!1,r.dispose()},function(t){i.onError(t)},function(){s&&c===n&&i.onNext(o),s=!1,r.dispose()}))},function(t){u.dispose(),i.onError(t),s=!1,c++},function(){u.dispose(),s&&i.onNext(o),i.onCompleted(),s=!1,c++});return new Tt(t,u)},e);if("number"==typeof arguments[0])return new sr(this,arguments[0],arguments[1]);throw new Error("Invalid arguments");var e,h},ee.windowWithTimeOrCount=ee.windowTimeOrCount=function(h,a,p){var e=this;return It(p)||(p=Xt),new vr(function(r){var n=new qt,t=new xt(n),i=new Rt(t),o=0,s=0,u=new wr;function c(e){var t=new Ft;n.setDisposable(t),t.setDisposable(p.scheduleFuture(null,h,function(){if(e===s){o=0;var t=++s;u.onCompleted(),u=new wr,r.onNext(Et(u,i)),c(t)}}))}return r.onNext(Et(u,i)),c(0),t.add(e.subscribe(function(t){var e=0,n=!1;u.onNext(t),++o===a&&(n=!0,o=0,e=++s,u.onCompleted(),u=new wr,r.onNext(Et(u,i))),n&&c(e)},function(t){u.onError(t),r.onError(t)},function(){u.onCompleted(),r.onCompleted()})),i},e)},ee.bufferWithTimeOrCount=ee.bufferTimeOrCount=function(t,e,n){return this.windowWithTimeOrCount(t,e,n).flatMap(bn)};var cr=function(n){function t(t,e){this.source=t,this._s=e,n.call(this)}return mt(t,n),t.prototype.subscribeCore=function(t){return this.source.subscribe(new hr(t,this._s))},t}(be),hr=function(n){function t(t,e){this._o=t,this._s=e,n.call(this)}return mt(t,n),t.prototype.next=function(t){this._o.onNext({value:t,timestamp:this._s.now()})},t.prototype.error=function(t){this._o.onError(t)},t.prototype.completed=function(){this._o.onCompleted()},t}(pe);ee.timestamp=function(t){return It(t)||(t=Xt),new cr(this,t)};var ar=function(n){function t(t,e){this.source=t,this._sampler=e,n.call(this)}return mt(t,n),t.prototype.subscribeCore=function(t){var e={o:t,atEnd:!1,value:null,hasValue:!1,sourceSubscription:new Ft};return e.sourceSubscription.setDisposable(this.source.subscribe(new lr(e))),new Tt(e.sourceSubscription,this._sampler.subscribe(new pr(e)))},t}(be),pr=function(e){function t(t){this._s=t,e.call(this)}return mt(t,e),t.prototype._handleMessage=function(){this._s.hasValue&&(this._s.hasValue=!1,this._s.o.onNext(this._s.value)),this._s.atEnd&&this._s.o.onCompleted()},t.prototype.next=function(){this._handleMessage()},t.prototype.error=function(t){this._s.onError(t)},t.prototype.completed=function(){this._handleMessage()},t}(pe),lr=function(e){function t(t){this._s=t,e.call(this)}return mt(t,e),t.prototype.next=function(t){this._s.hasValue=!0,this._s.value=t},t.prototype.error=function(t){this._s.o.onError(t)},t.prototype.completed=function(){this._s.atEnd=!0,this._s.sourceSubscription.dispose()},t}(pe);ee.sample=function(t,e){return It(e)||(e=Xt),new ar(this,"number"==typeof t?nr(t,e):t)};var fr=c.TimeoutError=function(t){this.message=t||"Timeout has occurred",this.name="TimeoutError",Error.call(this)};fr.prototype=Object.create(Error.prototype),ee.timeout=function(){var e,h,a,p,u,c,l,f,t=arguments[0];if(t instanceof Date||"number"==typeof t)return u=this,c=t,l=arguments[1],f=arguments[2],It(l)&&(f=l,l=observableThrow(new fr)),l instanceof Error&&(l=observableThrow(l)),It(f)||(f=Xt),fe.isObservable(l)||(l=observableThrow(new fr)),new vr(function(e){var n=0,t=new Ft,r=new qt,i=!1,o=new qt;function s(){var t=n;o.setDisposable(f.scheduleFuture(null,c,function(){(i=n===t)&&(w(l)&&(l=Hn(l)),r.setDisposable(l.subscribe(e)))}))}return r.setDisposable(t),s(),t.setDisposable(u.subscribe(function(t){i||(n++,e.onNext(t),s())},function(t){i||(n++,e.onError(t))},function(){i||(n++,e.onCompleted())})),new Tt(r,o)},u);if(fe.isObservable(t)||m(t))return e=this,h=t,a=arguments[1],p=arguments[2],m(h)&&(p=a,a=h,h=observableNever()),fe.isObservable(p)||(p=observableThrow(new fr)),new vr(function(i){var o=new qt,s=new qt,t=new Ft;o.setDisposable(t);var u=0,c=!1;function n(t){var e=u,n=new Ft;function r(){return c=e===u}s.setDisposable(n),n.setDisposable(t.subscribe(function(){r()&&o.setDisposable(p.subscribe(i)),n.dispose()},function(t){r()&&i.onError(t)},function(){r()&&o.setDisposable(p.subscribe(i))}))}function r(){var t=!c;return t&&u++,t}return n(h),t.setDisposable(e.subscribe(function(t){if(r()){i.onNext(t);var e=x(a)(t);if(e===C)return i.onError(e.e);n(w(e)?Hn(e):e)}},function(t){r()&&i.onError(t)},function(){r()&&i.onCompleted()})),new Tt(o,s)},e);throw new Error("Invalid arguments")},ee.throttle=function(t,i){It(i)||(i=Xt);var o=+t||0;if(o<=0)throw new RangeError("windowDuration cannot be less or equal zero.");var e=this;return new vr(function(n){var r=0;return e.subscribe(function(t){var e=i.now();(0===r||o<=e-r)&&(r=e,n.onNext(t))},function(t){n.onError(t)},function(){n.onCompleted()})},e)};var dr=function(n){function t(t,e){this.source=t,this.controller=new wr,this.paused=!0,e&&e.subscribe?this.pauser=this.controller.merge(e):this.pauser=this.controller,n.call(this)}return mt(t,n),t.prototype._subscribe=function(t){var e=this.source.publish(),n=e.subscribe(t),r=At,i=this.pauser.startWith(!this.paused).distinctUntilChanged().subscribe(function(t){t?r=e.connect():(r.dispose(),r=At)});return new Mt([n,r,i])},t.prototype.pause=function(){this.paused=!0,this.controller.onNext(!1)},t.prototype.resume=function(){this.paused=!1,this.controller.onNext(!0)},t}(fe);ee.pausable=function(t){return new dr(this,t)};var br=function(n){function t(t,e){this.source=t,this.controller=new wr,this.paused=!0,e&&e.subscribe?this.pauser=this.controller.merge(e):this.pauser=this.controller,n.call(this)}return mt(t,n),t.prototype._subscribe=function(e){var n,t,h,a,r=[];function i(){for(;0<r.length;)e.onNext(r.shift())}return(t=this.source,h=this.pauser.startWith(!this.paused).distinctUntilChanged(),a=function(t,e){return{data:t,shouldFire:e}},new vr(function(r){var i,o=[!1,!1],s=!1,u=!1,c=new Array(2);function e(t,e){if(c[e]=t,o[e]=!0,s||(s=o.every(f))){if(i)return r.onError(i);var n=x(a).apply(null,c);if(n===C)return r.onError(n.e);r.onNext(n)}u&&c[1]&&r.onCompleted()}return new Tt(t.subscribe(function(t){e(t,0)},function(t){c[1]?r.onError(t):i=t},function(){u=!0,c[1]&&r.onCompleted()}),h.subscribe(function(t){e(t,1)},function(t){r.onError(t)},function(){e(u=!0,1)}))},t)).subscribe(function(t){n!==y&&t.shouldFire!==n?(n=t.shouldFire,t.shouldFire&&i()):(n=t.shouldFire,t.shouldFire?e.onNext(t.data):r.push(t.data))},function(t){i(),e.onError(t)},function(){i(),e.onCompleted()})},t.prototype.pause=function(){this.paused=!0,this.controller.onNext(!1)},t.prototype.resume=function(){this.paused=!1,this.controller.onNext(!0)},t}(fe);ee.pausableBuffered=function(t){return new br(this,t)};var vr=c.AnonymousObservable=function(n){function r(t,e){var n,r=e[0],i=e[1],o=x(i.__subscribe).call(i,r);o!==C||r.fail(C.e)||D(C.e),r.setDisposable((n=o)&&m(n.dispose)?n:m(n)?St(n):At)}function t(t,e){this.source=e,this.__subscribe=t,n.call(this)}return mt(t,n),t.prototype._subscribe=function(t){var e=new _r(t),n=[e,this];return $t.scheduleRequired()?$t.schedule(n,r):r(0,n),e},t}(fe),_r=function(e){function t(t){e.call(this),this.observer=t,this.m=new Ft}mt(t,e);var n=t.prototype;return n.next=function(t){var e=x(this.observer.onNext).call(this.observer,t);e===C&&(this.dispose(),D(e.e))},n.error=function(t){var e=x(this.observer.onError).call(this.observer,t);this.dispose(),e===C&&D(e.e)},n.completed=function(){var t=x(this.observer.onCompleted).call(this.observer);this.dispose(),t===C&&D(t.e)},n.setDisposable=function(t){this.m.setDisposable(t)},n.getDisposable=function(){return this.m.getDisposable()},n.dispose=function(){e.prototype.dispose.call(this),this.m.dispose()},t}(pe),yr=function(t,e){this._s=t,this._o=e};yr.prototype.dispose=function(){if(!this._s.isDisposed&&null!==this._o){var t=this._s.observers.indexOf(this._o);this._s.observers.splice(t,1),this._o=null}};var wr=c.Subject=function(t){function e(){t.call(this),this.isDisposed=!1,this.isStopped=!1,this.observers=[],this.hasError=!1}return mt(e,t),gt(e.prototype,he.prototype,{_subscribe:function(t){return jt(this),this.isStopped?(this.hasError?t.onError(this.error):t.onCompleted(),At):(this.observers.push(t),new yr(this,t))},hasObservers:function(){return jt(this),0<this.observers.length},onCompleted:function(){if(jt(this),!this.isStopped){this.isStopped=!0;for(var t=0,e=g(this.observers),n=e.length;t<n;t++)e[t].onCompleted();this.observers.length=0}},onError:function(t){if(jt(this),!this.isStopped){this.isStopped=!0,this.error=t,this.hasError=!0;for(var e=0,n=g(this.observers),r=n.length;e<r;e++)n[e].onError(t);this.observers.length=0}},onNext:function(t){if(jt(this),!this.isStopped)for(var e=0,n=g(this.observers),r=n.length;e<r;e++)n[e].onNext(t)},dispose:function(){this.isDisposed=!0,this.observers=null}}),e.create=function(t,e){return new AnonymousSubject(t,e)},e}(fe),mr=(c.BehaviorSubject=function(e){function t(t){e.call(this),this.value=t,this.observers=[],this.isDisposed=!1,this.isStopped=!1,this.hasError=!1}return mt(t,e),gt(t.prototype,he.prototype,{_subscribe:function(t){return jt(this),this.isStopped?(this.hasError?t.onError(this.error):t.onCompleted(),At):(this.observers.push(t),t.onNext(this.value),new yr(this,t))},getValue:function(){return jt(this),this.hasError&&D(this.error),this.value},hasObservers:function(){return jt(this),0<this.observers.length},onCompleted:function(){if(jt(this),!this.isStopped){this.isStopped=!0;for(var t=0,e=g(this.observers),n=e.length;t<n;t++)e[t].onCompleted();this.observers.length=0}},onError:function(t){if(jt(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=t;for(var e=0,n=g(this.observers),r=n.length;e<r;e++)n[e].onError(t);this.observers.length=0}},onNext:function(t){if(jt(this),!this.isStopped){this.value=t;for(var e=0,n=g(this.observers),r=n.length;e<r;e++)n[e].onNext(t)}},dispose:function(){this.isDisposed=!0,this.observers=null,this.value=null,this.error=null}}),t}(fe),c.ReplaySubject=function(r){var i=Math.pow(2,53)-1;function t(t,e,n){this.bufferSize=null==t?i:t,this.windowSize=null==e?i:e,this.scheduler=n||$t,this.q=[],this.observers=[],this.isStopped=!1,this.isDisposed=!1,this.hasError=!1,this.error=null,r.call(this)}return mt(t,r),gt(t.prototype,he.prototype,{_subscribe:function(t){jt(this);var e,n,r=new de(this.scheduler,t),i=(e=this,n=r,St(function(){n.dispose(),!e.isDisposed&&e.observers.splice(e.observers.indexOf(n),1)}));this._trim(this.scheduler.now()),this.observers.push(r);for(var o=0,s=this.q.length;o<s;o++)r.onNext(this.q[o].value);return this.hasError?r.onError(this.error):this.isStopped&&r.onCompleted(),r.ensureActive(),i},hasObservers:function(){return jt(this),0<this.observers.length},_trim:function(t){for(;this.q.length>this.bufferSize;)this.q.shift();for(;0<this.q.length&&t-this.q[0].interval>this.windowSize;)this.q.shift()},onNext:function(t){if(jt(this),!this.isStopped){var e=this.scheduler.now();this.q.push({interval:e,value:t}),this._trim(e);for(var n=0,r=g(this.observers),i=r.length;n<i;n++){var o=r[n];o.onNext(t),o.ensureActive()}}},onError:function(t){if(jt(this),!this.isStopped){this.isStopped=!0,this.error=t,this.hasError=!0;var e=this.scheduler.now();this._trim(e);for(var n=0,r=g(this.observers),i=r.length;n<i;n++){var o=r[n];o.onError(t),o.ensureActive()}this.observers.length=0}},onCompleted:function(){if(jt(this),!this.isStopped){this.isStopped=!0;var t=this.scheduler.now();this._trim(t);for(var e=0,n=g(this.observers),r=n.length;e<r;e++){var i=n[e];i.onCompleted(),i.ensureActive()}this.observers.length=0}},dispose:function(){this.isDisposed=!0,this.observers=null}}),t}(fe));"function"==typeof define&&"object"==typeof define.amd&&define.amd?(p.Rx=c,define(function(){return c})):r&&i?a?(i.exports=c).Rx=c:r.Rx=c:p.Rx=c;var gr=q()}).call(this);
//# sourceMappingURL=rx.prom.map
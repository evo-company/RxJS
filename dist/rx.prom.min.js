/* Copyright (c) Microsoft Open Technologies, Inc. All rights reserved. See License.txt in the project root for license information.*/
(function(y){var t={function:!0,object:!0};function e(t){return t&&t.Object===Object?t:null}var n,r=t[typeof exports]&&exports&&!exports.nodeType?exports:null,i=t[typeof module]&&module&&!module.nodeType?module:null,h=e(r&&i&&"object"==typeof global&&global),o=e(t[typeof self]&&self),s=e(t[typeof window]&&window),a=i&&i.exports===r?r:null,u=e(t[typeof this]&&this),p=h||s!==(u&&u.window)&&s||o||u||Function("return this")(),c={internals:{},config:{Promise:p.Promise},helpers:{}},l=c.helpers.noop=function(){},f=c.helpers.identity=function(t){return t},d=c.helpers.defaultNow=Date.now,b=c.helpers.defaultComparer=function(t,e){return yt(t,e)},v=c.helpers.defaultSubComparer=function(t,e){return e<t?1:t<e?-1:0},_=(c.helpers.defaultKeySerializer=function(t){return t.toString()},c.helpers.defaultError=function(t){throw t}),m=c.helpers.isPromise=function(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then},w=c.helpers.isFunction=((n=function(t){return"function"==typeof t||!1})(/x/)&&(n=function(t){return"function"==typeof t&&"[object Function]"==toString.call(t)}),n);function g(t){for(var e=t.length,n=new Array(e),r=0;r<e;r++)n[r]=t[r];return n}var E={e:{}};var C=c.internals.tryCatch=function(t){if(!w(t))throw new TypeError("fn must be a function");return e=t,function(){try{return e.apply(this,arguments)}catch(t){return E.e=t,E}};var e};function x(t){throw t}var D=c.config.longStackSupport=!1,N=C(function(){throw new Error})();D=!!N.e&&!!N.e.stack;var S,A=k(),O="From previous event:";function j(t,e){if(D&&e.stack&&"object"==typeof t&&null!==t&&t.stack&&-1===t.stack.indexOf(O)){for(var n=[],r=e;r;r=r.source)r.stack&&n.unshift(r.stack);n.unshift(t.stack);var i=n.join("\n"+O+"\n");t.stack=function(t){for(var e=t.split("\n"),n=[],r=0,i=e.length;r<i;r++){var o=e[r];!q(o)&&(-1===(s=o).indexOf("(module.js:")&&-1===s.indexOf("(node.js:"))&&o&&n.push(o)}var s;return n.join("\n")}(i)}}function q(t){var e=F(t);if(!e)return!1;var n=e[0],r=e[1];return n===S&&A<=r&&r<=dr}function k(){if(D)try{throw new Error}catch(t){var e=t.stack.split("\n"),n=F(0<e[0].indexOf("@")?e[1]:e[2]);if(!n)return;return S=n[0],n[1]}}function F(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(t);return r?[r[1],Number(r[2])]:void 0}var R=c.EmptyError=function(){this.message="Sequence contains no elements.",Error.call(this)};R.prototype=Object.create(Error.prototype),R.prototype.name="EmptyError";var T=c.ObjectDisposedError=function(){this.message="Object has been disposed",Error.call(this)};T.prototype=Object.create(Error.prototype),T.prototype.name="ObjectDisposedError";var M=c.ArgumentOutOfRangeError=function(){this.message="Argument out of range",Error.call(this)};M.prototype=Object.create(Error.prototype),M.prototype.name="ArgumentOutOfRangeError";var V=c.NotSupportedError=function(t){this.message=t||"This operation is not supported",Error.call(this)};V.prototype=Object.create(Error.prototype),V.prototype.name="NotSupportedError";var P=c.NotImplementedError=function(t){this.message=t||"This operation is not implemented",Error.call(this)};P.prototype=Object.create(Error.prototype),P.prototype.name="NotImplementedError";var L=c.helpers.notImplemented=function(){throw new P},I=(c.helpers.notSupported=function(){throw new V},"function"==typeof Symbol&&Symbol.iterator||"_es6shim_iterator_");p.Set&&"function"==typeof(new p.Set)["@@iterator"]&&(I="@@iterator");var W=c.doneEnumerator={done:!0,value:y},z=c.helpers.isIterable=function(t){return t&&t[I]!==y},K=c.helpers.isArrayLike=function(t){return t&&t.length!==y};c.helpers.iterator=I;var U=c.internals.bindCallback=function(r,i,t){if(void 0===i)return r;switch(t){case 0:return function(){return r.call(i)};case 1:return function(t){return r.call(i,t)};case 2:return function(t,e){return r.call(i,t,e)};case 3:return function(t,e,n){return r.call(i,t,e,n)}}return function(){return r.apply(i,arguments)}},B="[object Arguments]",Q="[object Array]",$="[object Boolean]",H="[object Date]",G="[object Error]",J="[object Number]",X="[object Object]",Y="[object RegExp]",Z="[object String]",tt={};tt["[object Float32Array]"]=tt["[object Float64Array]"]=tt["[object Int8Array]"]=tt["[object Int16Array]"]=tt["[object Int32Array]"]=tt["[object Uint8Array]"]=tt["[object Uint8ClampedArray]"]=tt["[object Uint16Array]"]=tt["[object Uint32Array]"]=!0,tt[B]=tt[Q]=tt["[object ArrayBuffer]"]=tt[$]=tt[H]=tt[G]=tt["[object Function]"]=tt["[object Map]"]=tt[J]=tt[X]=tt[Y]=tt["[object Set]"]=tt[Z]=tt["[object WeakMap]"]=!1;var et,nt,rt,it,ot=Object.prototype,st=ot.hasOwnProperty,ut=ot.toString,ct=Math.pow(2,53)-1,ht=Object.keys||(et=Object.prototype.hasOwnProperty,nt=!{toString:null}.propertyIsEnumerable("toString"),it=(rt=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(t){if("object"!=typeof t&&("function"!=typeof t||null===t))throw new TypeError("Object.keys called on non-object");var e,n,r=[];for(e in t)et.call(t,e)&&r.push(e);if(nt)for(n=0;n<it;n++)et.call(t,rt[n])&&r.push(rt[n]);return r});var at=c.internals.isObject=function(t){var e=typeof t;return!!t&&("object"===e||"function"===e)};function pt(t){return!!t&&"object"==typeof t}function lt(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=ct}var ft=function(){try{Object({toString:0}+"")}catch(t){return function(){return!1}}return function(t){return"function"!=typeof t.toString&&"string"==typeof(t+"")}}();var dt=Array.isArray||function(t){return pt(t)&&lt(t.length)&&ut.call(t)===Q};function bt(t,e){for(var n=-1,r=t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function vt(t,e,n,r,i,o){var s,u=dt(t),c=dt(e),h=Q,a=Q;u||((h=ut.call(t))===B?h=X:h!==X&&(u=pt(s=t)&&lt(s.length)&&!!tt[ut.call(s)])),c||(a=ut.call(e))===B&&(a=X);var p=h===X&&!ft(t),l=a===X&&!ft(e),f=h===a;if(f&&!u&&!p)return function(t,e,n){switch(n){case $:case H:return+t==+e;case G:return t.name===e.name&&t.message===e.message;case J:return t!==+t?e!==+e:t===+e;case Y:case Z:return t===e+""}return!1}(t,e,h);if(!r){var d=p&&st.call(t,"__wrapped__"),b=l&&st.call(e,"__wrapped__");if(d||b)return n(d?t.value():t,b?e.value():e,r,i,o)}if(!f)return!1;i||(i=[]),o||(o=[]);for(var v=i.length;v--;)if(i[v]===t)return o[v]===e;i.push(t),o.push(e);var _=(u?function(t,e,n,r,i,o){var s=-1,u=t.length,c=e.length;if(u!==c&&!(r&&u<c))return!1;for(;++s<u;){var h=t[s],a=e[s];if(void 0!==y)return!1;if(r){if(!bt(e,function(t){return h===t||n(h,t,r,i,o)}))return!1}else if(h!==a&&!n(h,a,r,i,o))return!1}return!0}:function(t,e,n,r,i,o){var s=ht(t),u=s.length;if(u!==ht(e).length&&!r)return!1;for(var c,h=u;h--;)if(c=s[h],!(r?c in e:st.call(e,c)))return!1;for(var a=r;++h<u;){var p=t[c=s[h]],l=e[c];if(!(void 0===y?n(p,l,r,i,o):void 0))return!1;a||(a="constructor"===c)}if(!a){var f=t.constructor,d=e.constructor;if(f!==d&&"constructor"in t&&"constructor"in e&&!("function"==typeof f&&f instanceof f&&"function"==typeof d&&d instanceof d))return!1}return!0})(t,e,n,r,i,o);return i.pop(),o.pop(),_}function _t(t,e,n,r,i){return t===e||(null==t||null==e||!at(t)&&!pt(e)?t!=t&&e!=e:vt(t,e,_t,n,r,i))}var yt=c.internals.isEqual=function(t,e){return _t(t,e)},mt=(Array.prototype.slice,c.internals.inherits=function(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}),wt=c.internals.addProperties=function(t){for(var e=[],n=1,r=arguments.length;n<r;n++)e.push(arguments[n]);for(var i=0,o=e.length;i<o;i++){var s=e[i];for(var u in s)t[u]=s[u]}},gt=c.internals.addRef=function(e,n){return new sr(function(t){return new Ft(n.getDisposable(),e.subscribe(t))})};function Et(t,e){for(var n=new Array(t),r=0;r<t;r++)n[r]=e();return n}var Ct=c.CompositeDisposable=function(){var t,e,n=[];if(Array.isArray(arguments[0]))n=arguments[0];else for(e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];this.disposables=n,this.isDisposed=!1,this.length=n.length},xt=Ct.prototype;xt.add=function(t){this.isDisposed?t.dispose():(this.disposables.push(t),this.length++)},xt.remove=function(t){var e=!1;if(!this.isDisposed){var n=this.disposables.indexOf(t);-1!==n&&(e=!0,this.disposables.splice(n,1),this.length--,t.dispose())}return e},xt.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var t=this.disposables.length,e=new Array(t),n=0;n<t;n++)e[n]=this.disposables[n];for(this.disposables=[],n=this.length=0;n<t;n++)e[n].dispose()}};var Dt=c.Disposable=function(t){this.isDisposed=!1,this.action=t||l};Dt.prototype.dispose=function(){this.isDisposed||(this.action(),this.isDisposed=!0)};var Nt=Dt.create=function(t){return new Dt(t)},St=Dt.empty={dispose:l},At=Dt.isDisposable=function(t){return t&&w(t.dispose)},Ot=Dt.checkDisposed=function(t){if(t.isDisposed)throw new T},jt=Dt._fixup=function(t){return At(t)?t:St},qt=c.SingleAssignmentDisposable=function(){this.isDisposed=!1,this.current=null};qt.prototype.getDisposable=function(){return this.current},qt.prototype.setDisposable=function(t){if(this.current)throw new Error("Disposable has already been assigned");var e=this.isDisposed;!e&&(this.current=t),e&&t&&t.dispose()},qt.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this.current;this.current=null,t&&t.dispose()}};var kt=c.SerialDisposable=function(){this.isDisposed=!1,this.current=null};kt.prototype.getDisposable=function(){return this.current},kt.prototype.setDisposable=function(t){var e=this.isDisposed;if(!e){var n=this.current;this.current=t}n&&n.dispose(),e&&t&&t.dispose()},kt.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this.current;this.current=null}t&&t.dispose()};var Ft=c.BinaryDisposable=function(t,e){this._first=t,this._second=e,this.isDisposed=!1};Ft.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this._first;this._first=null,t&&t.dispose();var e=this._second;this._second=null,e&&e.dispose()}};var Rt=c.NAryDisposable=function(t){this._disposables=t,this.isDisposed=!1};Rt.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var t=0,e=this._disposables.length;t<e;t++)this._disposables[t].dispose();this._disposables.length=0}};var Tt=c.RefCountDisposable=function(){function t(t){this.disposable=t,this.disposable.count++,this.isInnerDisposed=!1}function e(t){this.underlyingDisposable=t,this.isDisposed=!1,this.isPrimaryDisposed=!1,this.count=0}return t.prototype.dispose=function(){this.disposable.isDisposed||this.isInnerDisposed||(this.isInnerDisposed=!0,this.disposable.count--,0===this.disposable.count&&this.disposable.isPrimaryDisposed&&(this.disposable.isDisposed=!0,this.disposable.underlyingDisposable.dispose()))},e.prototype.dispose=function(){this.isDisposed||this.isPrimaryDisposed||(this.isPrimaryDisposed=!0,0===this.count&&(this.isDisposed=!0,this.underlyingDisposable.dispose()))},e.prototype.getDisposable=function(){return this.isDisposed?St:new t(this)},e}(),Mt=c.internals.ScheduledItem=function(t,e,n,r,i){this.scheduler=t,this.state=e,this.action=n,this.dueTime=r,this.comparer=i||v,this.disposable=new qt};Mt.prototype.invoke=function(){this.disposable.setDisposable(this.invokeCore())},Mt.prototype.compareTo=function(t){return this.comparer(this.dueTime,t.dueTime)},Mt.prototype.isCancelled=function(){return this.disposable.isDisposed},Mt.prototype.invokeCore=function(){return jt(this.action(this.scheduler,this.state))};var Vt=c.Scheduler=function(){function i(){}i.isScheduler=function(t){return t instanceof i};var t=i.prototype;return t.schedule=function(t,e){throw new P},t.scheduleFuture=function(t,e,n){var r=e;return r instanceof Date&&(r-=this.now()),0===(r=i.normalize(r))?this.schedule(t,n):this._scheduleFuture(t,r,n)},t._scheduleFuture=function(t,e,n){throw new P},i.now=d,i.prototype.now=d,i.normalize=function(t){return t<0&&(t=0),t},i}(),Pt=Vt.normalize,Lt=Vt.isScheduler;!function(t){function n(o,t){var e=t[0],s=t[1],u=new Ct;return s(e,function(t){var n=!1,r=!1;var i=o.schedule(t,function(t,e){n?u.remove(i):r=!0;return s(e,c),St});r||(u.add(i),n=!0)}),u;function c(t){var n=false,r=false;var i=o.schedule(t,e);if(!r){u.add(i);n=true}function e(t,e){if(n){u.remove(i)}else{r=true}return s(e,c),St}}}function r(s,t){var e=t[0],u=t[1],c=new Ct;return u(e,function(t,e){var n=!1,r=!1;var i=s.scheduleFuture(t,e,function(t,e){n?c.remove(i):r=!0;return u(e,h),St});r||(c.add(i),n=!0)}),c;function h(t,e){var n=false,r=false;var i=s.scheduleFuture(t,e,o);if(!r){c.add(i);n=true}function o(t,e){if(n){c.remove(i)}else{r=true}return u(e,h),St}}}t.scheduleRecursive=function(t,e){return this.schedule([t,e],n)},t.scheduleRecursiveFuture=function(t,e,n){return this.scheduleFuture([t,n],e,r)}}(Vt.prototype),Vt.prototype.schedulePeriodic=function(t,e,n){if(void 0===p.setInterval)throw new V;e=Pt(e);var r=t,i=p.setInterval(function(){r=n(r)},e);return Nt(function(){p.clearInterval(i)})};var It,Wt,zt=function(t){function e(){t.call(this)}return mt(e,t),e.prototype.schedule=function(t,e){return jt(e(this,t))},e}(Vt),Kt=Vt.immediate=new zt,Ut=function(t){var i;function o(){for(;0<i.length;){var t=i.dequeue();!t.isCancelled()&&t.invoke()}}function e(){t.call(this)}return mt(e,t),e.prototype.schedule=function(t,e){var n=new Mt(this,t,e,this.now());if(i)i.enqueue(n);else{(i=new Yt(4)).enqueue(n);var r=C(o)();i=null,r===E&&x(r.e)}return n.disposable},e.prototype.scheduleRequired=function(){return!i},e}(Vt),Bt=Vt.currentThread=new Ut,Qt=(c.internals.SchedulePeriodicRecursive=function(){function t(t,e,n,r){this._scheduler=t,this._state=e,this._period=n,this._action=r}return t.prototype.start=function(){var r,t=new qt;return(this._cancel=t).setDisposable(this._scheduler.scheduleRecursiveFuture(0,this._period,(r=this,function(t,e){e(0,r._period);var n=C(r._action)(r._state);n===E&&(r._cancel.dispose(),x(n.e)),r._state=n}))),t},t}(),function(){var t,e=l;if(p.setTimeout)t=p.setTimeout,e=p.clearTimeout;else{if(!p.WScript)throw new V;t=function(t,e){p.WScript.Sleep(e),t()}}return{setTimeout:t,clearTimeout:e}}()),$t=Qt.setTimeout,Ht=Qt.clearTimeout;!function(){var r=1,i={},o=!1;function s(t){if(o)$t(function(){s(t)},0);else{var e=i[t];if(e){o=!0;var n=C(e)();Wt(t),o=!1,n===E&&x(n.e)}}}Wt=function(t){delete i[t]};var t=new RegExp("^"+String(toString).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),n="function"==typeof(n=h&&a&&h.setImmediate)&&!t.test(n)&&n;if(w(n))It=function(t){var e=r++;return i[e]=t,n(function(){s(e)}),e};else if("undefined"!=typeof process&&"[object process]"==={}.toString.call(process))It=function(t){var e=r++;return i[e]=t,process.nextTick(function(){s(e)}),e};else if(function(){if(!p.postMessage||p.importScripts)return!1;var t=!1,e=p.onmessage;return p.onmessage=function(){t=!0},p.postMessage("","*"),p.onmessage=e,t}()){var u="ms.rx.schedule"+Math.random();p.addEventListener("message",function(t){"string"==typeof t.data&&t.data.substring(0,u.length)===u&&s(t.data.substring(u.length))},!1),It=function(t){var e=r++;return i[e]=t,p.postMessage(u+e,"*"),e}}else if(p.MessageChannel){var c=new p.MessageChannel;c.port1.onmessage=function(t){s(t.data)},It=function(t){var e=r++;return i[e]=t,c.port2.postMessage(e),e}}else It="document"in p&&"onreadystatechange"in p.document.createElement("script")?function(t){var e=p.document.createElement("script"),n=r++;return i[n]=t,e.onreadystatechange=function(){s(n),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},p.document.documentElement.appendChild(e),n}:function(t){var e=r++;return i[e]=t,$t(function(){s(e)},0),e}}();var Gt=function(t){function e(){t.call(this)}function o(t,e,n,r){return function(){t.setDisposable(Dt._fixup(e(n,r)))}}function i(t){this._id=t,this.isDisposed=!1}function s(t){this._id=t,this.isDisposed=!1}return mt(e,t),i.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,Wt(this._id))},s.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,Ht(this._id))},e.prototype.schedule=function(t,e){var n=new qt,r=It(o(n,e,this,t));return new Ft(n,new i(r))},e.prototype._scheduleFuture=function(t,e,n){if(0===e)return this.schedule(t,n);var r=new qt,i=$t(o(r,n,this,t),e);return new Ft(r,new s(i))},e.prototype.scheduleLongRunning=function(t,e){var n,r,i,o=Nt(l);return It((n=t,r=e,i=o,function(){r(n,i)})),o},e}(Vt),Jt=Vt.default=Vt.async=new Gt;function Xt(t,e){this.id=t,this.value=e}Xt.prototype.compareTo=function(t){var e=this.value.compareTo(t.value);return 0===e&&(e=this.id-t.id),e};var Yt=c.internals.PriorityQueue=function(t){this.items=new Array(t),this.length=0},Zt=Yt.prototype;Zt.isHigherPriority=function(t,e){return this.items[t].compareTo(this.items[e])<0},Zt.percolate=function(t){if(!(t>=this.length||t<0)){var e=t-1>>1;if(!(e<0||e===t)&&this.isHigherPriority(t,e)){var n=this.items[t];this.items[t]=this.items[e],this.items[e]=n,this.percolate(e)}}},Zt.heapify=function(t){if(+t||(t=0),!(t>=this.length||t<0)){var e=2*t+1,n=2*t+2,r=t;if(e<this.length&&this.isHigherPriority(e,r)&&(r=e),n<this.length&&this.isHigherPriority(n,r)&&(r=n),r!==t){var i=this.items[t];this.items[t]=this.items[r],this.items[r]=i,this.heapify(r)}}},Zt.peek=function(){return this.items[0].value},Zt.removeAt=function(t){this.items[t]=this.items[--this.length],this.items[this.length]=y,this.heapify()},Zt.dequeue=function(){var t=this.peek();return this.removeAt(0),t},Zt.enqueue=function(t){var e=this.length++;this.items[e]=new Xt(Yt.count++,t),this.percolate(e)},Zt.remove=function(t){for(var e=0;e<this.length;e++)if(this.items[e].value===t)return this.removeAt(e),!0;return!1},Yt.count=0;var te,ee=c.Notification=function(){function t(){}return t.prototype._accept=function(t,e,n){throw new P},t.prototype._acceptObserver=function(t,e,n){throw new P},t.prototype.accept=function(t,e,n){return t&&"object"==typeof t?this._acceptObserver(t):this._accept(t,e,n)},t.prototype.toObservable=function(t){var e=this;return Lt(t)||(t=Kt),new sr(function(n){return t.schedule(e,function(t,e){e._acceptObserver(n),"N"===e.kind&&n.onCompleted()})})},t}(),ne=function(t){function e(t){this.value=t,this.kind="N"}return mt(e,ee),e.prototype._accept=function(t){return t(this.value)},e.prototype._acceptObserver=function(t){return t.onNext(this.value)},e.prototype.toString=function(){return"OnNext("+this.value+")"},e}(),re=function(t){function e(t){this.error=t,this.kind="E"}return mt(e,ee),e.prototype._accept=function(t,e){return e(this.error)},e.prototype._acceptObserver=function(t){return t.onError(this.error)},e.prototype.toString=function(){return"OnError("+this.error+")"},e}(),ie=function(t){function e(){this.kind="C"}return mt(e,ee),e.prototype._accept=function(t,e,n){return n()},e.prototype._acceptObserver=function(t){return t.onCompleted()},e.prototype.toString=function(){return"OnCompleted()"},e}(),oe=(ee.createOnNext=function(t){return new ne(t)},ee.createOnError=function(t){return new re(t)},ee.createOnCompleted=function(){return new ie},c.Observer=function(){}),se=oe.create=function(t,e,n){return t||(t=l),e||(e=_),n||(n=l),new ce(t,e,n)},ue=c.internals.AbstractObserver=function(t){function e(){this.isStopped=!1}return mt(e,oe),e.prototype.next=L,e.prototype.error=L,e.prototype.completed=L,e.prototype.onNext=function(t){!this.isStopped&&this.next(t)},e.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.error(t))},e.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.completed())},e.prototype.dispose=function(){this.isStopped=!0},e.prototype.fail=function(t){return!this.isStopped&&(this.isStopped=!0,this.error(t),!0)},e}(),ce=c.AnonymousObserver=function(r){function t(t,e,n){r.call(this),this._onNext=t,this._onError=e,this._onCompleted=n}return mt(t,r),t.prototype.next=function(t){this._onNext(t)},t.prototype.error=function(t){this._onError(t)},t.prototype.completed=function(){this._onCompleted()},t}(ue),he=c.Observable=function(){function t(){if(c.config.longStackSupport&&D){var t=this._subscribe,e=C(x)(new Error).e;this.stack=e.stack.substring(e.stack.indexOf("\n")+1),this._subscribe=(r=this,i=t,function(e){var n=e.onError;return e.onError=function(t){j(t,r),n.call(e,t)},i.call(r,e)})}var r,i}return te=t.prototype,t.isObservable=function(t){return t&&w(t.subscribe)},te.subscribe=te.forEach=function(t,e,n){return this._subscribe("object"==typeof t?t:se(t,e,n))},te.subscribeOnNext=function(e,n){return this._subscribe(se(void 0!==n?function(t){e.call(n,t)}:e))},te.subscribeOnError=function(e,n){return this._subscribe(se(null,void 0!==n?function(t){e.call(n,t)}:e))},te.subscribeOnCompleted=function(t,e){return this._subscribe(se(null,null,void 0!==e?function(){t.call(e)}:t))},t}(),ae=c.internals.ScheduledObserver=function(n){function t(t,e){n.call(this),this.scheduler=t,this.observer=e,this.isAcquired=!1,this.hasFaulted=!1,this.queue=[],this.disposable=new kt}function e(t,e){var n;if(0<t.queue.length){n=t.queue.shift();var r=C(n)();if(r===E)return t.queue=[],t.hasFaulted=!0,x(r.e);e(t)}else t.isAcquired=!1}return mt(t,n),t.prototype.next=function(t){var e,n;this.queue.push((e=this.observer,n=t,function(){e.onNext(n)}))},t.prototype.error=function(t){var e,n;this.queue.push((e=this.observer,n=t,function(){e.onError(n)}))},t.prototype.completed=function(){var t;this.queue.push((t=this.observer,function(){t.onCompleted()}))},t.prototype.ensureActive=function(){var t=!1;!this.hasFaulted&&0<this.queue.length&&(t=!this.isAcquired,this.isAcquired=!0),t&&this.disposable.setDisposable(this.scheduler.scheduleRecursive(this,e))},t.prototype.dispose=function(){n.prototype.dispose.call(this),this.disposable.dispose()},t}(ue),pe=c.ObservableBase=function(t){function r(t,e){var n,r=e[0],i=e[1],o=C(i.subscribeCore).call(i,r);o!==E||r.fail(E.e)||x(E.e),r.setDisposable((n=o)&&w(n.dispose)?n:w(n)?Nt(n):St)}function e(){t.call(this)}return mt(e,t),e.prototype._subscribe=function(t){var e=new ur(t),n=[e,this];return Bt.scheduleRequired()?Bt.schedule(n,r):r(0,n),e},e.prototype.subscribeCore=L,e}(he),le=c.FlatMapObservable=function(i){function t(t,e,n,r){this.resultSelector=w(n)?n:null,this.selector=U(w(e)?e:function(){return e},r,3),this.source=t,i.call(this)}function e(t,e,n,r){this.i=0,this.selector=e,this.resultSelector=n,this.source=r,this.o=t,ue.call(this)}return mt(t,i),t.prototype.subscribeCore=function(t){return this.source.subscribe(new e(t,this.selector,this.resultSelector,this))},mt(e,ue),e.prototype._wrapResult=function(t,n,r){return this.resultSelector?t.map(function(t,e){return this.resultSelector(n,t,r,e)},this):t},e.prototype.next=function(t){var e=this.i++,n=C(this.selector)(t,e,this.source);if(n===E)return this.o.onError(n.e);m(n)&&(n=In(n)),(K(n)||z(n))&&(n=he.from(n)),this.o.onNext(this._wrapResult(n,t,e))},e.prototype.error=function(t){this.o.onError(t)},e.prototype.completed=function(){this.o.onCompleted()},t}(pe),fe=c.internals.Enumerable=function(){};function de(t){this._s=t,this.isDisposed=!1}de.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._s.isDisposed=!0)};var be=function(e){function t(t){this.sources=t,e.call(this)}function i(t,e){if(!t.isDisposed){var n=C(t.e.next).call(t.e);if(n===E)return t.o.onError(n.e);if(n.done)return t.o.onCompleted();var r=n.value;m(r)&&(r=In(r));var i=new qt;t.subscription.setDisposable(i),i.setDisposable(r.subscribe(new o(t,e)))}}function o(t,e){this._state=t,this._recurse=e,ue.call(this)}return mt(t,e),t.prototype.subscribeCore=function(t){var e=new kt,n={isDisposed:!1,o:t,subscription:e,e:this.sources[I]()},r=Bt.scheduleRecursive(n,i);return new Rt([e,r,new de(n)])},mt(o,ue),o.prototype.next=function(t){this._state.o.onNext(t)},o.prototype.error=function(t){this._state.o.onError(t)},o.prototype.completed=function(){this._recurse(this._state)},t}(pe);fe.prototype.concat=function(){return new be(this)};var ve=function(e){function t(t){this.sources=t,e.call(this)}function i(t,e){if(!t.isDisposed){var n=C(t.e.next).call(t.e);if(n===E)return t.o.onError(n.e);if(n.done)return null!==t.lastError?t.o.onError(t.lastError):t.o.onCompleted();var r=n.value;m(r)&&(r=In(r));var i=new qt;t.subscription.setDisposable(i),i.setDisposable(r.subscribe(new o(t,e)))}}function o(t,e){this._state=t,this._recurse=e,ue.call(this)}return mt(t,e),t.prototype.subscribeCore=function(t){var e=new kt,n={isDisposed:!1,e:this.sources[I](),subscription:e,lastError:null,o:t},r=Bt.scheduleRecursive(n,i);return new Rt([e,r,new de(n)])},mt(o,ue),o.prototype.next=function(t){this._state.o.onNext(t)},o.prototype.error=function(t){this._state.lastError=t,this._recurse(this._state)},o.prototype.completed=function(){this._state.o.onCompleted()},t}(pe);fe.prototype.catchError=function(){return new ve(this)};var _e=function(t){function e(t,e){this.v=t,this.c=null==e?-1:e}function n(t){this.v=t.v,this.l=t.c}return mt(e,fe),e.prototype[I]=function(){return new n(this)},n.prototype.next=function(){return 0===this.l?W:(0<this.l&&this.l--,{done:!1,value:this.v})},e}(),ye=fe.repeat=function(t,e){return new _e(t,e)},me=function(t){function e(t,e,n){this.s=t,this.fn=e?U(e,n,3):null}function n(t){this.i=-1,this.s=t.s,this.l=this.s.length,this.fn=t.fn}return mt(e,fe),e.prototype[I]=function(){return new n(this)},n.prototype.next=function(){return++this.i<this.l?{done:!1,value:this.fn?this.fn(this.s[this.i],this.i,this.s):this.s[this.i]}:W},e}(),we=fe.of=function(t,e,n){return new me(t,e,n)},ge=function(e){function t(t){this.source=t,e.call(this)}function n(t){this.o=t,this.a=[],ue.call(this)}return mt(t,e),t.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t))},mt(n,ue),n.prototype.next=function(t){this.a.push(t)},n.prototype.error=function(t){this.o.onError(t)},n.prototype.completed=function(){this.o.onNext(this.a),this.o.onCompleted()},t}(pe);te.toArray=function(){return new ge(this)},he.create=function(t,e){return new sr(t,e)};var Ee=function(e){function t(t){this.scheduler=t,e.call(this)}function n(t,e){this.observer=t,this.scheduler=e}function r(t,e){return e.onCompleted(),St}return mt(t,e),t.prototype.subscribeCore=function(t){return new n(t,this.scheduler).run()},n.prototype.run=function(){var t=this.observer;return this.scheduler===Kt?r(0,t):this.scheduler.schedule(t,r)},t}(pe),Ce=new Ee(Kt),xe=he.empty=function(t){return Lt(t)||(t=Kt),t===Kt?Ce:new Ee(t)},De=function(r){function t(t,e,n){this._iterable=t,this._fn=e,this._scheduler=n,r.call(this)}return mt(t,r),t.prototype.subscribeCore=function(t){var i,o,s,e=function(t){var e=t[I];if(!e&&"string"==typeof t)return new Se(t)[I]();if(!e&&t.length!==y)return new Oe(t)[I]();if(!e)throw new TypeError("Object is not iterable");return t[I]()}(Object(this._iterable));return this._scheduler.scheduleRecursive(0,(i=t,o=e,s=this._fn,function(t,e){var n=C(o.next).call(o);if(n===E)return i.onError(n.e);if(n.done)return i.onCompleted();var r=n.value;if(w(s)&&(r=C(s)(r,t))===E)return i.onError(r.e);i.onNext(r),e(t+1)}))},t}(pe),Ne=Math.pow(2,53)-1;function Se(t){this._s=t}function Ae(t){this._s=t,this._l=t.length,this._i=0}function Oe(t){this._a=t}function je(t){this._a=t,this._l=function(t){var e=+t.length;if(isNaN(e))return 0;if(0===e||(n=e,"number"!=typeof n||!p.isFinite(n)))return e;var n;if(r=e,i=+r,(e=(0===i?i:isNaN(i)?i:i<0?-1:1)*Math.floor(Math.abs(e)))<=0)return 0;var r,i;if(Ne<e)return Ne;return e}(t),this._i=0}Se.prototype[I]=function(){return new Ae(this._s)},Ae.prototype[I]=function(){return this},Ae.prototype.next=function(){return this._i<this._l?{done:!1,value:this._s.charAt(this._i++)}:W},Oe.prototype[I]=function(){return new je(this._a)},je.prototype[I]=function(){return this},je.prototype.next=function(){return this._i<this._l?{done:!1,value:this._a[this._i++]}:W};he.from=function(t,e,n,r){if(null==t)throw new Error("iterable cannot be null.");if(e&&!w(e))throw new Error("mapFn when provided must be a function");if(e)var i=U(e,n,2);return Lt(r)||(r=Bt),new De(t,i,r)};var qe=function(n){function t(t,e){this._args=t,this._scheduler=e,n.call(this)}return mt(t,n),t.prototype.subscribeCore=function(t){return this._scheduler.scheduleRecursive(0,(n=t,r=this._args,i=r.length,function(t,e){t<i?(n.onNext(r[t]),e(t+1)):n.onCompleted()}));var n,r,i},t}(pe),ke=he.fromArray=function(t,e){return Lt(e)||(e=Bt),new qe(t,e)};he.of=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new qe(e,Bt)},he.ofWithScheduler=function(t){for(var e=arguments.length,n=new Array(e-1),r=1;r<e;r++)n[r-1]=arguments[r];return new qe(n,t)};var Fe=function(r){function t(t,e,n){this.value=t,this.repeatCount=null==e?-1:e,this.scheduler=n,r.call(this)}return mt(t,r),t.prototype.subscribeCore=function(t){return new Re(t,this).run()},t}(pe);function Re(t,e){this.observer=t,this.parent=e}Re.prototype.run=function(){var n=this.observer,r=this.parent.value;return this.parent.scheduler.scheduleRecursive(this.parent.repeatCount,function(t,e){if((-1===t||0<t)&&(n.onNext(r),0<t&&t--),0===t)return n.onCompleted();e(t)})},he.repeat=function(t,e,n){return Lt(n)||(n=Bt),new Fe(t,e,n)};var Te=function(n){function t(t,e){this._value=t,this._scheduler=e,n.call(this)}function r(t,e){var n=e[0],r=e[1];return r.onNext(n),r.onCompleted(),St}return mt(t,n),t.prototype.subscribeCore=function(t){var e=[this._value,t];return this._scheduler===Kt?r(null,e):this._scheduler.schedule(e,r)},t}(pe),Me=(he.return=he.just=function(t,e){return Lt(e)||(e=Kt),new Te(t,e)},function(n){function t(t,e){this.source=t,this._fn=e,n.call(this)}return mt(t,n),t.prototype.subscribeCore=function(t){var e=new qt,n=new kt;return n.setDisposable(e),e.setDisposable(this.source.subscribe(new Ve(t,n,this._fn))),n},t}(pe)),Ve=function(r){function t(t,e,n){this._o=t,this._s=e,this._fn=n,r.call(this)}return mt(t,r),t.prototype.next=function(t){this._o.onNext(t)},t.prototype.completed=function(){return this._o.onCompleted()},t.prototype.error=function(t){var e=C(this._fn)(t);if(e===E)return this._o.onError(e.e);m(e)&&(e=In(e));var n=new qt;this._s.setDisposable(n),n.setDisposable(e.subscribe(this._o))},t}(ue);te.catch=function(t){return w(t)?new Me(this,t):Pe([this,t])};var Pe=he.catch=function(){var t;if(Array.isArray(arguments[0]))t=arguments[0];else{var e=arguments.length;t=new Array(e);for(var n=0;n<e;n++)t[n]=arguments[n]}return we(t).catchError()};function Le(){return!1}function Ie(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e}te.combineLatest=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Array.isArray(e[0])?e[0].unshift(this):e.unshift(this),Ke.apply(this,e)};var We=function(n){function t(t,e){this._params=t,this._cb=e,n.call(this)}return mt(t,n),t.prototype.subscribeCore=function(t){for(var e=this._params.length,n=new Array(e),r={hasValue:Et(e,Le),hasValueAll:!1,isDone:Et(e,Le),values:new Array(e)},i=0;i<e;i++){var o=this._params[i],s=new qt;n[i]=s,m(o)&&(o=In(o)),s.setDisposable(o.subscribe(new ze(t,i,this._cb,r)))}return new Rt(n)},t}(pe),ze=function(i){function t(t,e,n,r){this._o=t,this._i=e,this._cb=n,this._state=r,i.call(this)}return mt(t,i),t.prototype.next=function(t){if(this._state.values[this._i]=t,this._state.hasValue[this._i]=!0,this._state.hasValueAll||(this._state.hasValueAll=this._state.hasValue.every(f))){var e=C(this._cb).apply(null,this._state.values);if(e===E)return this._o.onError(e.e);this._o.onNext(e)}else this._state.isDone.filter((n=this._i,function(t,e){return e!==n})).every(f)&&this._o.onCompleted();var n},t.prototype.error=function(t){this._o.onError(t)},t.prototype.completed=function(){this._state.isDone[this._i]=!0,this._state.isDone.every(f)&&this._o.onCompleted()},t}(ue),Ke=he.combineLatest=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=w(e[t-1])?e.pop():Ie;return Array.isArray(e[0])&&(e=e[0]),new We(e,r)};te.concat=function(){for(var t=[],e=0,n=arguments.length;e<n;e++)t.push(arguments[e]);return t.unshift(this),Qe.apply(null,t)};var Ue=function(n){function t(t,e){this._s=t,this._fn=e,n.call(this)}return mt(t,n),t.prototype.next=function(t){this._s.o.onNext(t)},t.prototype.error=function(t){this._s.o.onError(t)},t.prototype.completed=function(){this._s.i++,this._fn(this._s)},t}(ue),Be=function(e){function t(t){this._sources=t,e.call(this)}function o(t,e){if(!t.disposable.isDisposed){if(t.i===t.sources.length)return t.o.onCompleted();var n=t.sources[t.i];m(n)&&(n=In(n));var r=new qt;t.subscription.setDisposable(r),r.setDisposable(n.subscribe(new Ue(t,e)))}}return mt(t,e),t.prototype.subscribeCore=function(t){var e=new kt,n=Nt(l),r={o:t,i:0,subscription:e,disposable:n,sources:this._sources},i=Kt.scheduleRecursive(r,o);return new Rt([e,n,i])},t}(pe),Qe=he.concat=function(){var t;if(Array.isArray(arguments[0]))t=arguments[0];else{t=new Array(arguments.length);for(var e=0,n=arguments.length;e<n;e++)t[e]=arguments[e]}return new Be(t)},$e=function(n){function t(t,e){this.source=t,this.maxConcurrent=e,n.call(this)}return mt(t,n),t.prototype.subscribeCore=function(t){var e=new Ct;return e.add(this.source.subscribe(new He(t,this.maxConcurrent,e))),e},t}(pe),He=function(r){function t(t,e,n){this.o=t,this.max=e,this.g=n,this.done=!1,this.q=[],this.activeCount=0,r.call(this)}function n(t,e){this.parent=t,this.sad=e,r.call(this)}return mt(t,r),t.prototype.handleSubscribe=function(t){var e=new qt;this.g.add(e),m(t)&&(t=In(t)),e.setDisposable(t.subscribe(new n(this,e)))},t.prototype.next=function(t){this.activeCount<this.max?(this.activeCount++,this.handleSubscribe(t)):this.q.push(t)},t.prototype.error=function(t){this.o.onError(t)},t.prototype.completed=function(){this.done=!0,0===this.activeCount&&this.o.onCompleted()},mt(n,r),n.prototype.next=function(t){this.parent.o.onNext(t)},n.prototype.error=function(t){this.parent.o.onError(t)},n.prototype.completed=function(){this.parent.g.remove(this.sad),0<this.parent.q.length?this.parent.handleSubscribe(this.parent.q.shift()):(this.parent.activeCount--,this.parent.done&&0===this.parent.activeCount&&this.parent.o.onCompleted())},t}(ue);te.merge=function(t){return"number"!=typeof t?Xe(this,t):new $e(this,t)};var Ge=function(e){function t(t){this.source=t,e.call(this)}return mt(t,e),t.prototype.subscribeCore=function(t){var e=new Ct,n=new qt;return e.add(n),n.setDisposable(this.source.subscribe(new Je(t,e))),e},t}(pe),Je=function(n){function t(t,e){this.o=t,this.g=e,this.done=!1,n.call(this)}function r(t,e){this.parent=t,this.sad=e,n.call(this)}return mt(t,n),t.prototype.next=function(t){var e=new qt;this.g.add(e),m(t)&&(t=In(t)),e.setDisposable(t.subscribe(new r(this,e)))},t.prototype.error=function(t){this.o.onError(t)},t.prototype.completed=function(){this.done=!0,1===this.g.length&&this.o.onCompleted()},mt(r,n),r.prototype.next=function(t){this.parent.o.onNext(t)},r.prototype.error=function(t){this.parent.o.onError(t)},r.prototype.completed=function(){this.parent.g.remove(this.sad),this.parent.done&&1===this.parent.g.length&&this.parent.o.onCompleted()},t}(ue);te.mergeAll=function(){return new Ge(this)};var Xe=he.merge=function(){var t,e,n,r,i=[],o=arguments.length;if(arguments[0])if(Lt(arguments[0]))for(t=arguments[0],e=1;e<o;e++)i.push(arguments[e]);else for(t=Kt,e=0;e<o;e++)i.push(arguments[e]);else for(t=Kt,e=1;e<o;e++)i.push(arguments[e]);return Array.isArray(i[0])&&(i=i[0]),(n=t,r=i,Lt(n)||(n=Bt),new qe(r,n)).mergeAll()},Ye=function(n){function t(t,e){this._s=t,this._o=m(e)?In(e):e,this._open=!1,n.call(this)}return mt(t,n),t.prototype.subscribeCore=function(t){var e=new qt;e.setDisposable(this._s.subscribe(new Ze(t,this))),m(this._o)&&(this._o=In(this._o));var n=new qt;return n.setDisposable(this._o.subscribe(new tn(t,this,n))),new Ft(e,n)},t}(pe),Ze=function(n){function t(t,e){this._o=t,this._p=e,n.call(this)}return mt(t,n),t.prototype.next=function(t){this._p._open&&this._o.onNext(t)},t.prototype.error=function(t){this._o.onError(t)},t.prototype.onCompleted=function(){this._p._open&&this._o.onCompleted()},t}(ue),tn=function(r){function t(t,e,n){this._o=t,this._p=e,this._r=n,r.call(this)}return mt(t,r),t.prototype.next=function(){this._p._open=!0,this._r.dispose()},t.prototype.error=function(t){this._o.onError(t)},t.prototype.onCompleted=function(){this._r.dispose()},t}(ue);te.skipUntil=function(t){return new Ye(this,t)};var en=function(n){function t(t,e){this.source=t,this.other=m(e)?In(e):e,n.call(this)}return mt(t,n),t.prototype.subscribeCore=function(t){return new Ft(this.source.subscribe(t),this.other.subscribe(new nn(t)))},t}(pe),nn=function(e){function t(t){this._o=t,e.call(this)}return mt(t,e),t.prototype.next=function(){this._o.onCompleted()},t.prototype.error=function(t){this._o.onError(t)},t.prototype.onCompleted=l,t}(ue);function Le(){return!1}function Ie(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e}te.takeUntil=function(t){return new en(this,t)};var rn=function(r){function t(t,e,n){this._s=t,this._ss=e,this._cb=n,r.call(this)}return mt(t,r),t.prototype.subscribeCore=function(t){for(var e=this._ss.length,n={hasValue:Et(e,Le),hasValueAll:!1,values:new Array(e)},r=this._ss.length,i=new Array(r+1),o=0;o<r;o++){var s=this._ss[o],u=new qt;m(s)&&(s=In(s)),u.setDisposable(s.subscribe(new on(t,o,n))),i[o]=u}var c=new qt;return c.setDisposable(this._s.subscribe(new sn(t,this._cb,n))),i[r]=c,new Rt(i)},t}(pe),on=function(r){function t(t,e,n){this._o=t,this._i=e,this._state=n,r.call(this)}return mt(t,r),t.prototype.next=function(t){this._state.values[this._i]=t,this._state.hasValue[this._i]=!0,this._state.hasValueAll=this._state.hasValue.every(f)},t.prototype.error=function(t){this._o.onError(t)},t.prototype.completed=l,t}(ue),sn=function(r){function t(t,e,n){this._o=t,this._cb=e,this._state=n,r.call(this)}return mt(t,r),t.prototype.next=function(t){var e=[t].concat(this._state.values);if(this._state.hasValueAll){var n=C(this._cb).apply(null,e);if(n===E)return this._o.onError(n.e);this._o.onNext(n)}},t.prototype.error=function(t){this._o.onError(t)},t.prototype.completed=function(){this._o.onCompleted()},t}(ue);function Le(){return!1}function un(){return[]}te.withLatestFrom=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=w(e[t-1])?e.pop():Ie;return Array.isArray(e[0])&&(e=e[0]),new rn(this,e,r)};var cn=function(n){function t(t,e){this._s=t,this._cb=e,n.call(this)}return mt(t,n),t.prototype.subscribeCore=function(t){for(var e=this._s.length,n=new Array(e),r=Et(e,Le),i=Et(e,un),o=0;o<e;o++){var s=this._s[o],u=new qt;n[o]=u,m(s)&&(s=In(s)),u.setDisposable(s.subscribe(new hn(t,o,this,i,r)))}return new Rt(n)},t}(pe),hn=function(o){function t(t,e,n,r,i){this._o=t,this._i=e,this._p=n,this._q=r,this._d=i,o.call(this)}function i(t){return 0<t.length}function s(t){return t.shift()}return mt(t,o),t.prototype.next=function(t){if(this._q[this._i].push(t),this._q.every(i)){var e=this._q.map(s),n=C(this._p._cb).apply(null,e);if(n===E)return this._o.onError(n.e);this._o.onNext(n)}else this._d.filter((r=this._i,function(t,e){return e!==r})).every(f)&&this._o.onCompleted();var r},t.prototype.error=function(t){this._o.onError(t)},t.prototype.completed=function(){this._d[this._i]=!0,this._d.every(f)&&this._o.onCompleted()},t}(ue);function an(t){return t.toArray()}function pn(t){return 0<t.length}te.zip=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=w(e[t-1])?e.pop():Ie;Array.isArray(e[0])&&(e=e[0]);return e.unshift(this),new cn(e,r)},he.zip=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Array.isArray(e[0])&&(e=w(e[1])?e[0].concat(e[1]):e[0]);var r=e.shift();return r.zip.apply(r,e)},te.asObservable=function(){return new sr((e=this,function(t){return e.subscribe(t)}),this);var e},te.bufferWithCount=te.bufferCount=function(t,e){return"number"!=typeof e&&(e=t),this.windowWithCount(t,e).flatMap(an).filter(pn)};var ln=function(r){function t(t,e,n){this.source=t,this.keyFn=e,this.comparer=n,r.call(this)}return mt(t,r),t.prototype.subscribeCore=function(t){return this.source.subscribe(new fn(t,this.keyFn,this.comparer))},t}(pe),fn=function(r){function t(t,e,n){this.o=t,this.keyFn=e,this.comparer=n,this.hasCurrentKey=!1,this.currentKey=null,r.call(this)}return mt(t,r),t.prototype.next=function(t){var e,n=t;return w(this.keyFn)&&(n=C(this.keyFn)(t))===E?this.o.onError(n.e):this.hasCurrentKey&&(e=C(this.comparer)(this.currentKey,n))===E?this.o.onError(e.e):void(this.hasCurrentKey&&e||(this.hasCurrentKey=!0,this.currentKey=n,this.o.onNext(t)))},t.prototype.error=function(t){this.o.onError(t)},t.prototype.completed=function(){this.o.onCompleted()},t}(ue);te.distinctUntilChanged=function(t,e){return e||(e=b),new ln(this,t,e)};var dn=function(i){function t(t,e,n,r){this.source=t,this._oN=e,this._oE=n,this._oC=r,i.call(this)}function e(t,e){this.o=t,this.t=!e._oN||w(e._oN)?se(e._oN||l,e._oE||l,e._oC||l):e._oN,this.isStopped=!1,ue.call(this)}return mt(t,i),t.prototype.subscribeCore=function(t){return this.source.subscribe(new e(t,this))},mt(e,ue),e.prototype.next=function(t){var e=C(this.t.onNext).call(this.t,t);e===E&&this.o.onError(e.e),this.o.onNext(t)},e.prototype.error=function(t){var e=C(this.t.onError).call(this.t,t);if(e===E)return this.o.onError(e.e);this.o.onError(t)},e.prototype.completed=function(){var t=C(this.t.onCompleted).call(this.t);if(t===E)return this.o.onError(t.e);this.o.onCompleted()},t}(pe);te.do=te.tap=te.doAction=function(t,e,n){return new dn(this,t,e,n)},te.doOnNext=te.tapOnNext=function(e,n){return this.tap(void 0!==n?function(t){e.call(n,t)}:e)},te.doOnError=te.tapOnError=function(e,n){return this.tap(l,void 0!==n?function(t){e.call(n,t)}:e)},te.doOnCompleted=te.tapOnCompleted=function(t,e){return this.tap(l,null,void 0!==e?function(){t.call(e)}:t)};var bn=function(r){function t(t,e,n){this.source=t,this._fn=U(e,n,0),r.call(this)}function n(t,e){this.isDisposed=!1,this._s=t,this._fn=e}return mt(t,r),t.prototype.subscribeCore=function(t){var e=C(this.source.subscribe).call(this.source,t);return e===E&&(this._fn(),x(e.e)),new n(e,this._fn)},n.prototype.dispose=function(){if(!this.isDisposed){var t=C(this._s.dispose).call(this._s);this._fn(),t===E&&x(t.e)}},t}(pe);te.finally=function(t,e){return new bn(this,t,e)},te.retry=function(t){return ye(this,t).catchError()};var vn=function(i){function t(t,e,n,r){this.source=t,this.accumulator=e,this.hasSeed=n,this.seed=r,i.call(this)}return mt(t,i),t.prototype.subscribeCore=function(t){return this.source.subscribe(new _n(t,this))},t}(pe),_n=function(n){function t(t,e){this._o=t,this._p=e,this._fn=e.accumulator,this._hs=e.hasSeed,this._s=e.seed,this._ha=!1,this._a=null,this._hv=!1,this._i=0,n.call(this)}return mt(t,n),t.prototype.next=function(t){if(!this._hv&&(this._hv=!0),this._ha?this._a=C(this._fn)(this._a,t,this._i,this._p):(this._a=this._hs?C(this._fn)(this._s,t,this._i,this._p):t,this._ha=!0),this._a===E)return this._o.onError(this._a.e);this._o.onNext(this._a),this._i++},t.prototype.error=function(t){this._o.onError(t)},t.prototype.completed=function(){!this._hv&&this._hs&&this._o.onNext(this._s),this._o.onCompleted()},t}(ue);te.scan=function(){var t,e=!1,n=arguments[0];return 2===arguments.length&&(e=!0,t=arguments[1]),new vn(this,n,e,t)},te.startWith=function(){var t,e=0;arguments.length&&Lt(arguments[0])?(t=arguments[0],e=1):t=Kt;for(var n=[],r=e,i=arguments.length;r<i;r++)n.push(arguments[r]);return Qe.apply(null,[ke(n,t),this])},te.windowWithCount=te.windowCount=function(u,c){var r=this;if(+u||(u=0),Math.abs(u)===1/0&&(u=0),u<=0)throw new M;if(null==c&&(c=u),+c||(c=0),Math.abs(c)===1/0&&(c=0),c<=0)throw new M;return new sr(function(e){var t=new qt,n=new Tt(t),i=0,o=[];function s(){var t=new hr;o.push(t),e.onNext(gt(t,n))}return s(),t.setDisposable(r.subscribe(function(t){for(var e=0,n=o.length;e<n;e++)o[e].onNext(t);var r=i-u+1;0<=r&&r%c==0&&o.shift().onCompleted(),++i%c==0&&s()},function(t){for(;0<o.length;)o.shift().onError(t);e.onError(t)},function(){for(;0<o.length;)o.shift().onCompleted();e.onCompleted()})),n},r)};var yn=function(r){function n(t,e,n){this.source=t,this.selector=U(e,n,3),r.call(this)}function e(t,e,n){this.o=t,this.selector=e,this.source=n,this.i=0,ue.call(this)}return mt(n,r),n.prototype.internalMap=function(t,e){return new n(this.source,(r=t,i=this,function(t,e,n){return r.call(this,i.selector(t,e,n),e,n)}),e);var r,i},n.prototype.subscribeCore=function(t){return this.source.subscribe(new e(t,this.selector,this))},mt(e,ue),e.prototype.next=function(t){var e=C(this.selector)(t,this.i++,this.source);if(e===E)return this.o.onError(e.e);this.o.onNext(e)},e.prototype.error=function(t){this.o.onError(t)},e.prototype.completed=function(){this.o.onCompleted()},n}(pe);te.map=te.select=function(t,e){var n="function"==typeof t?t:function(){return t};return this instanceof yn?this.internalMap(n,e):new yn(this,n,e)},te.pluck=function(){var i,o,t=arguments.length,e=new Array(t);if(0===t)throw new Error("List of properties cannot be empty.");for(var n=0;n<t;n++)e[n]=arguments[n];return this.map((i=e,o=t,function(t){for(var e=t,n=0;n<o;n++){var r=e[i[n]];if(void 0===r)return y;e=r}return e}))},te.flatMap=te.selectMany=te.mergeMap=function(t,e,n){return new le(this,t,e,n).mergeAll()},te.flatMapLatest=te.switchMap=function(t,e,n){return new le(this,t,e,n).switchLatest()},te.flatMapObserver=te.selectManyObserver=function(i,o,e,s){var t=this;return new sr(function(n){var r=0;return t.subscribe(function(t){var e;try{e=i.call(s,t,r++)}catch(t){return void n.onError(t)}m(e)&&(e=In(e)),n.onNext(e)},function(t){var e;try{e=o.call(s,t)}catch(t){return void n.onError(t)}m(e)&&(e=In(e)),n.onNext(e),n.onCompleted()},function(){var t;try{t=e.call(s)}catch(t){return void n.onError(t)}m(t)&&(t=In(t)),n.onNext(t),n.onCompleted()})},t).mergeAll()};var mn=function(n){function t(t,e){this.source=t,this._count=e,n.call(this)}function e(t,e){this._o=t,this._r=e,ue.call(this)}return mt(t,n),t.prototype.subscribeCore=function(t){return this.source.subscribe(new e(t,this._count))},mt(e,ue),e.prototype.next=function(t){this._r<=0?this._o.onNext(t):this._r--},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},t}(pe);te.skip=function(t){if(t<0)throw new M;return new mn(this,t)};var wn=function(n){function t(t,e){this.source=t,this._fn=e,n.call(this)}return mt(t,n),t.prototype.subscribeCore=function(t){return this.source.subscribe(new gn(t,this))},t}(pe),gn=function(n){function t(t,e){this._o=t,this._p=e,this._i=0,this._r=!1,n.call(this)}return mt(t,n),t.prototype.next=function(t){if(!this._r){var e=C(this._p._fn)(t,this._i++,this._p);if(e===E)return this._o.onError(e.e);this._r=!e}this._r&&this._o.onNext(t)},t.prototype.error=function(t){this._o.onError(t)},t.prototype.completed=function(){this._o.onCompleted()},t}(ue);te.skipWhile=function(t,e){var n=U(t,e,3);return new wn(this,n)};var En=function(n){function t(t,e){this.source=t,this._count=e,n.call(this)}function e(t,e){this._o=t,this._c=e,this._r=e,ue.call(this)}return mt(t,n),t.prototype.subscribeCore=function(t){return this.source.subscribe(new e(t,this._count))},mt(e,ue),e.prototype.next=function(t){0<this._r--&&(this._o.onNext(t),this._r<=0&&this._o.onCompleted())},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},t}(pe);te.take=function(t,e){if(t<0)throw new M;return 0===t?xe(e):new En(this,t)};var Cn=function(n){function t(t,e){this.source=t,this._fn=e,n.call(this)}return mt(t,n),t.prototype.subscribeCore=function(t){return this.source.subscribe(new xn(t,this))},t}(pe),xn=function(n){function t(t,e){this._o=t,this._p=e,this._i=0,this._r=!0,n.call(this)}return mt(t,n),t.prototype.next=function(t){if(this._r&&(this._r=C(this._p._fn)(t,this._i++,this._p),this._r===E))return this._o.onError(this._r.e);this._r?this._o.onNext(t):this._o.onCompleted()},t.prototype.error=function(t){this._o.onError(t)},t.prototype.completed=function(){this._o.onCompleted()},t}(ue);te.takeWhile=function(t,e){var n=U(t,e,3);return new Cn(this,n)};var Dn=function(r){function n(t,e,n){this.source=t,this.predicate=U(e,n,3),r.call(this)}function e(t,e,n){this.o=t,this.predicate=e,this.source=n,this.i=0,ue.call(this)}return mt(n,r),n.prototype.subscribeCore=function(t){return this.source.subscribe(new e(t,this.predicate,this))},n.prototype.internalFilter=function(t,e){return new n(this.source,(r=t,i=this,function(t,e,n){return i.predicate(t,e,n)&&r.call(this,t,e,n)}),e);var r,i},mt(e,ue),e.prototype.next=function(t){var e=C(this.predicate)(t,this.i++,this.source);if(e===E)return this.o.onError(e.e);e&&this.o.onNext(t)},e.prototype.error=function(t){this.o.onError(t)},e.prototype.completed=function(){this.o.onCompleted()},n}(pe);function Nn(t){this.comparer=t,this.set=[]}te.filter=te.where=function(t,e){return this instanceof Dn?this.internalFilter(t,e):new Dn(this,t,e)},Nn.prototype.push=function(t){var e=-1===function(t,e,n){for(var r=0,i=t.length;r<i;r++)if(n(t[r],e))return r;return-1}(this.set,t,this.comparer);return e&&this.set.push(t),e};var Sn=function(r){function t(t,e,n){this.source=t,this._keyFn=e,this._cmpFn=n,r.call(this)}return mt(t,r),t.prototype.subscribeCore=function(t){return this.source.subscribe(new An(t,this._keyFn,this._cmpFn))},t}(pe),An=function(r){function t(t,e,n){this._o=t,this._keyFn=e,this._h=new Nn(n),r.call(this)}return mt(t,r),t.prototype.next=function(t){var e=t;if(w(this._keyFn)&&(e=C(this._keyFn)(t))===E)return this._o.onError(e.e);this._h.push(e)&&this._o.onNext(t)},t.prototype.error=function(t){this._o.onError(t)},t.prototype.completed=function(){this._o.onCompleted()},t}(ue);te.distinct=function(t,e){return e||(e=b),new Sn(this,t,e)};var On=function(n){function t(t,e){this.source=t,this._obj=e,n.call(this)}return mt(t,n),t.prototype.subscribeCore=function(t){return this.source.subscribe(new jn(t,this._obj,this.source))},t}(pe),jn=function(r){function t(t,e,n){this._o=t,this._obj=e,this._s=n,this._i=0,r.call(this)}return mt(t,r),t.prototype.next=function(t){if(this._obj.predicate){var e=C(this._obj.predicate)(t,this._i++,this._s);if(e===E)return this._o.onError(e.e);Boolean(e)&&(this._o.onNext(t),this._o.onCompleted())}else this._obj.predicate||(this._o.onNext(t),this._o.onCompleted())},t.prototype.error=function(t){this._o.onError(t)},t.prototype.completed=function(){this._obj.defaultValue===y?this._o.onError(new R):(this._o.onNext(this._obj.defaultValue),this._o.onCompleted())},t}(ue);te.first=function(){var t={};if(t="object"==typeof arguments[0]?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]},w(t.predicate)){var e=t.predicate;t.predicate=U(e,t.thisArg,3)}return new On(this,t)},he.wrap=function(t){function e(){return he.spawn.call(this,t.apply(this,arguments))}return e.__generatorFunction__=t,e};var qn=he.spawn=function(){for(var r=arguments[0],c=this,t=[],e=1,n=arguments.length;e<n;e++)t.push(arguments[e]);return new sr(function(i){var o=new Ct;if(w(r)&&(r=r.apply(c,t)),!r||!w(r.next))return i.onNext(r),i.onCompleted();function s(t){var e=C(r.next).call(r,t);if(e===E)return i.onError(e.e);n(e)}function u(t){var e=C(r.next).call(r,t);if(e===E)return i.onError(e.e);n(e)}function n(t){if(t.done)return i.onNext(t.value),void i.onCompleted();var e=kn.call(c,t.value),n=null,r=!1;he.isObservable(e)?o.add(e.subscribe(function(t){r=!0,n=t},u,function(){r&&s(n)})):u(new TypeError("type not supported"))}return s(),o})};function kn(t){return t?he.isObservable(t)?t:m(t)?he.fromPromise(t):function(t){var e=t.constructor;if(!e)return!1;if("GeneratorFunction"===e.name||"GeneratorFunction"===e.displayName)return!0;return Fn(e.prototype)}(t)||Fn(t)?qn.call(this,t):w(t)?function(t){var e=this;return new sr(function(o){t.call(e,function(){var t=arguments[0],e=arguments[1];if(t)return o.onError(t);if(2<arguments.length){for(var n=[],r=1,i=arguments.length;r<i;r++)n.push(arguments[r]);e=n}o.onNext(e),o.onCompleted()})})}.call(this,t):K(t)||z(t)?function(t){return he.from(t).concatMap(function(t){return he.isObservable(t)||at(t)?kn.call(null,t):c.Observable.just(t)}).toArray()}.call(this,t):at(t)?function(t){for(var n=new t.constructor,e=Object.keys(t),r=[],i=0,o=e.length;i<o;i++){var s=e[i],u=kn.call(this,t[s]);u&&he.isObservable(u)?c(u,s):n[s]=t[s]}return he.forkJoin.apply(he,r).map(function(){return n});function c(t,e){n[e]=y,r.push(t.map(function(t){n[e]=t}))}}.call(this,t):t:t}function Fn(t){return w(t.next)&&w(t.throw)}function at(t){return Object==t.constructor}function Rn(t,e,n,r){var i,o,s,u=new ar;return r.push((i=u,o=e,s=n,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(w(s)){if((e=C(s).apply(o,e))===E)return i.onError(e.e);i.onNext(e)}else e.length<=1?i.onNext(e[0]):i.onNext(e);i.onCompleted()})),t.apply(e,r),u.asObservable()}function Tn(t,e,n,r){var i,o,s,u=new ar;return r.push((i=u,o=e,s=n,function(){var t=arguments[0];if(t)return i.onError(t);for(var e=arguments.length,n=[],r=1;r<e;r++)n[r-1]=arguments[r];if(w(s)){var n=C(s).apply(o,n);if(n===E)return i.onError(n.e);i.onNext(n)}else n.length<=1?i.onNext(n[0]):i.onNext(n);i.onCompleted()})),t.apply(e,r),u.asObservable()}function Mn(t,e,n){this._e=t,this._n=e,this._fn=n,this._e.addEventListener(this._n,this._fn,!1),this.isDisposed=!1}function Vn(t,e,n){var r,i=new Ct,o=Object.prototype.toString.call(t);if(r=t,(p.StaticNodeList?r instanceof p.StaticNodeList||r instanceof p.NodeList:"[object NodeList]"===Object.prototype.toString.call(r))||"[object HTMLCollection]"===o)for(var s=0,u=t.length;s<u;s++)i.add(Vn(t.item(s),e,n));else t&&i.add(new Mn(t,e,n));return i}he.fromCallback=function(r,i,o){return function(){void 0===i&&(i=this);for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Rn(r,i,o,e)}},he.fromNodeCallback=function(r,i,o){return function(){void 0===i&&(i=this);for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Tn(r,i,o,e)}},Mn.prototype.dispose=function(){this.isDisposed||(this._e.removeEventListener(this._n,this._fn,!1),this.isDisposed=!0)},c.config.useNativeEvents=!1;var Pn=function(r){function t(t,e,n){this._el=t,this._n=e,this._fn=n,r.call(this)}return mt(t,r),t.prototype.subscribeCore=function(t){return Vn(this._el,this._n,(e=t,n=this._fn,function(){var t=arguments[0];if(w(n)&&(t=C(n).apply(null,arguments))===E)return e.onError(t.e);e.onNext(t)}));var e,n},t}(pe);he.fromEvent=function(e,n,t,r){return e.addListener?fromEventPattern(function(t){e.addListener(n,t,r)},function(t){e.removeListener(n,t,r)},t):c.config.useNativeEvents||"function"!=typeof e.on||"function"!=typeof e.off?new Pn(e,n,t).publish().refCount():fromEventPattern(function(t){e.on(n,t,r)},function(t){e.off(n,t,r)},t)};var Ln=function(n){function t(t,e){this._p=t,this._s=e,n.call(this)}function i(t,e){var n=e[0],r=e[1];n.onNext(r),n.onCompleted()}function o(t,e){var n=e[0],r=e[1];n.onError(r)}return mt(t,n),t.prototype.subscribeCore=function(e){var n=new qt,r=this,t=this._p;return w(t)&&(t=C(t)())===E?e.onError(t.e):t.then(function(t){n.setDisposable(r._s.schedule([e,t],i))},function(t){n.setDisposable(r._s.schedule([e,t],o))}),n},t}(pe),In=he.fromPromise=function(t,e){return e||(e=Jt),new Ln(t,e)},Wn=function(r){function t(t,e,n){this.source=t,this._fn1=e,this._fn2=n,r.call(this)}return mt(t,r),t.prototype.subscribeCore=function(t){var e=this.source.multicast(this._fn1());return new Ft(this._fn2(e).subscribe(t),e.connect())},t}(pe);te.multicast=function(t,e){return w(t)?new Wn(this,t,e):new Kn(this,t)},te.publish=function(t){return t&&w(t)?this.multicast(function(){return new hr},t):this.multicast(new hr)},te.share=function(){return this.publish().refCount()},te.publishLast=function(t){return t&&w(t)?this.multicast(function(){return new ar},t):this.multicast(new ar)},te.publishValue=function(t,e){return 2===arguments.length?this.multicast(function(){return new lr(e)},t):this.multicast(new lr(t))},te.shareValue=function(t){return this.publishValue(t).refCount()},te.replay=function(t,e,n,r){return t&&w(t)?this.multicast(function(){return new fr(e,n,r)},t):this.multicast(new fr(e,n,r))},te.shareReplay=function(t,e,n){return this.replay(null,t,e,n).refCount()};var zn=function(e){function t(t){this.source=t,this._count=0,this._connectableSubscription=null,e.call(this)}function n(t,e){this._p=t,this._s=e,this.isDisposed=!1}return mt(t,e),t.prototype.subscribeCore=function(t){var e=this.source.subscribe(t);return 1==++this._count&&(this._connectableSubscription=this.source.connect()),new n(this,e)},n.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._s.dispose(),0==--this._p._count&&this._p._connectableSubscription.dispose())},t}(pe),Kn=c.ConnectableObservable=function(n){function t(t,e){this.source=t,this._connection=null,this._source=t.asObservable(),this._subject=e,n.call(this)}function e(t,e){this._p=t,this._s=e}return mt(t,n),e.prototype.dispose=function(){this._s&&(this._s.dispose(),this._s=null,this._p._connection=null)},t.prototype.connect=function(){if(!this._connection){if(this._subject.isStopped)return St;var t=this._source.subscribe(this._subject);this._connection=new e(this,t)}return this._connection},t.prototype._subscribe=function(t){return this._subject.subscribe(t)},t.prototype.refCount=function(){return new zn(this)},t}(he),Un=function(n){function t(t,e){this._dt=t,this._s=e,n.call(this)}function e(t,e){e.onNext(0),e.onCompleted()}return mt(t,n),t.prototype.subscribeCore=function(t){return this._s.scheduleFuture(t,this._dt,e)},t}(pe);function Bn(t,e,s){return new sr(function(r){var i=t,o=Pt(e);return s.scheduleRecursiveFuture(0,i,function(t,e){if(0<o){var n=s.now();(i=new Date(i.getTime()+o)).getTime()<=n&&(i=new Date(n+o))}r.onNext(t),e(t+1,new Date(i))})})}function Qn(t,n,r){return t===n?new sr(function(e){return r.schedulePeriodic(0,n,function(t){return e.onNext(t),t+1})}):observableDefer(function(){return Bn(new Date(r.now()+t),n,r)})}var $n=he.interval=function(t,e){return Qn(t,t,Lt(e)?e:Jt)};he.timer=function(t,e,n){var r;return Lt(n)||(n=Jt),null!=e&&"number"==typeof e?r=e:Lt(e)&&(n=e),(t instanceof Date||"number"==typeof t)&&r===y?new Un(t,n):t instanceof Date&&r!==y?Bn(t,e,n):Qn(t,r,n)};function Hn(e,i,p){return new sr(function(s){var t,u=!1,r=new kt,c=null,h=[],a=!1;return t=e.materialize().timestamp(p).subscribe(function(t){var e,n;"E"===t.value.kind?((h=[]).push(t),c=t.value.error,n=!a):(h.push({value:t.value,timestamp:t.timestamp+i}),n=!u,u=!0),n&&(null!==c?s.onError(c):(e=new qt,r.setDisposable(e),e.setDisposable(p.scheduleRecursiveFuture(null,i,function(t,e){var n,r,i,o;if(null===c){for(a=!0;i=null,0<h.length&&h[0].timestamp-p.now()<=0&&(i=h.shift().value),null!==i&&i.accept(s),null!==i;);o=!1,(r=0)<h.length?(o=!0,r=Math.max(0,h[0].timestamp-p.now())):u=!1,a=!1,null!==(n=c)?s.onError(n):o&&e(null,r)}}))))}),new Ft(t,r)},e)}te.delay=function(){var s,t,e,u,c,n,r,i,o=arguments[0];if("number"==typeof o||o instanceof Date){var h=o,a=arguments[1];return Lt(a)||(a=Jt),h instanceof Date?(n=this,r=h,i=a,observableDefer(function(){return Hn(n,r-i.now(),i)})):Hn(this,h,a)}if(he.isObservable(o)||w(o))return s=this,t=o,e=arguments[1],w(t)?c=t:(u=t,c=e),new sr(function(r){var i=new Ct,t=!1,e=new kt;function n(){e.setDisposable(s.subscribe(function(t){var e=C(c)(t);if(e===E)return r.onError(e.e);var n=new qt;i.add(n),n.setDisposable(e.subscribe(function(){r.onNext(t),i.remove(n),o()},function(t){r.onError(t)},function(){r.onNext(t),i.remove(n),o()}))},function(t){r.onError(t)},function(){t=!0,e.dispose(),o()}))}function o(){t&&0===i.length&&r.onCompleted()}return u?e.setDisposable(u.subscribe(n,function(t){r.onError(t)},n)):n(),new Ft(e,i)},s);throw new Error("Invalid arguments")};var Gn=function(r){function t(t,e,n){Lt(n)||(n=Jt),this.source=t,this._dt=e,this._s=n,r.call(this)}return mt(t,r),t.prototype.subscribeCore=function(t){var e=new kt;return new Ft(this.source.subscribe(new Jn(t,this._dt,this._s,e)),e)},t}(pe),Jn=function(i){function t(t,e,n,r){this._o=t,this._d=e,this._scheduler=n,this._c=r,this._v=null,this._hv=!1,this._id=0,i.call(this)}return mt(t,i),t.prototype.next=function(n){this._hv=!0,this._v=n;var r=++this._id,t=new qt;this._c.setDisposable(t),t.setDisposable(this._scheduler.scheduleFuture(this,this._d,function(t,e){e._hv&&e._id===r&&e._o.onNext(n),e._hv=!1}))},t.prototype.error=function(t){this._c.dispose(),this._o.onError(t),this._hv=!1,this._id++},t.prototype.completed=function(){this._c.dispose(),this._hv&&this._o.onNext(this._v),this._o.onCompleted(),this._hv=!1,this._id++},t}(ue);function an(t){return t.toArray()}te.debounce=function(){if(w(arguments[0]))return e=this,h=arguments[0],new sr(function(i){var o,s=!1,u=new kt,c=0,t=e.subscribe(function(t){var e=C(h)(t);if(e===E)return i.onError(e.e);m(e)&&(e=In(e)),s=!0,o=t;var n=++c,r=new qt;u.setDisposable(r),r.setDisposable(e.subscribe(function(){s&&c===n&&i.onNext(o),s=!1,r.dispose()},function(t){i.onError(t)},function(){s&&c===n&&i.onNext(o),s=!1,r.dispose()}))},function(t){u.dispose(),i.onError(t),s=!1,c++},function(){u.dispose(),s&&i.onNext(o),i.onCompleted(),s=!1,c++});return new Ft(t,u)},e);if("number"==typeof arguments[0])return new Gn(this,arguments[0],arguments[1]);throw new Error("Invalid arguments");var e,h},te.windowWithTimeOrCount=te.windowTimeOrCount=function(h,a,p){var e=this;return Lt(p)||(p=Jt),new sr(function(r){var n=new kt,t=new Ct(n),i=new Tt(t),o=0,s=0,u=new hr;function c(e){var t=new qt;n.setDisposable(t),t.setDisposable(p.scheduleFuture(null,h,function(){if(e===s){o=0;var t=++s;u.onCompleted(),u=new hr,r.onNext(gt(u,i)),c(t)}}))}return r.onNext(gt(u,i)),c(0),t.add(e.subscribe(function(t){var e=0,n=!1;u.onNext(t),++o===a&&(n=!0,o=0,e=++s,u.onCompleted(),u=new hr,r.onNext(gt(u,i))),n&&c(e)},function(t){u.onError(t),r.onError(t)},function(){u.onCompleted(),r.onCompleted()})),i},e)},te.bufferWithTimeOrCount=te.bufferTimeOrCount=function(t,e,n){return this.windowWithTimeOrCount(t,e,n).flatMap(an)};var Xn=function(n){function t(t,e){this.source=t,this._s=e,n.call(this)}return mt(t,n),t.prototype.subscribeCore=function(t){return this.source.subscribe(new Yn(t,this._s))},t}(pe),Yn=function(n){function t(t,e){this._o=t,this._s=e,n.call(this)}return mt(t,n),t.prototype.next=function(t){this._o.onNext({value:t,timestamp:this._s.now()})},t.prototype.error=function(t){this._o.onError(t)},t.prototype.completed=function(){this._o.onCompleted()},t}(ue);te.timestamp=function(t){return Lt(t)||(t=Jt),new Xn(this,t)};var Zn=function(n){function t(t,e){this.source=t,this._sampler=e,n.call(this)}return mt(t,n),t.prototype.subscribeCore=function(t){var e={o:t,atEnd:!1,value:null,hasValue:!1,sourceSubscription:new qt};return e.sourceSubscription.setDisposable(this.source.subscribe(new er(e))),new Ft(e.sourceSubscription,this._sampler.subscribe(new tr(e)))},t}(pe),tr=function(e){function t(t){this._s=t,e.call(this)}return mt(t,e),t.prototype._handleMessage=function(){this._s.hasValue&&(this._s.hasValue=!1,this._s.o.onNext(this._s.value)),this._s.atEnd&&this._s.o.onCompleted()},t.prototype.next=function(){this._handleMessage()},t.prototype.error=function(t){this._s.onError(t)},t.prototype.completed=function(){this._handleMessage()},t}(ue),er=function(e){function t(t){this._s=t,e.call(this)}return mt(t,e),t.prototype.next=function(t){this._s.hasValue=!0,this._s.value=t},t.prototype.error=function(t){this._s.o.onError(t)},t.prototype.completed=function(){this._s.atEnd=!0,this._s.sourceSubscription.dispose()},t}(ue);te.sample=function(t,e){return Lt(e)||(e=Jt),new Zn(this,"number"==typeof t?$n(t,e):t)};var nr=c.TimeoutError=function(t){this.message=t||"Timeout has occurred",this.name="TimeoutError",Error.call(this)};nr.prototype=Object.create(Error.prototype),te.timeout=function(){var e,h,a,p,u,c,l,f,t=arguments[0];if(t instanceof Date||"number"==typeof t)return u=this,c=t,l=arguments[1],f=arguments[2],Lt(l)&&(f=l,l=observableThrow(new nr)),l instanceof Error&&(l=observableThrow(l)),Lt(f)||(f=Jt),he.isObservable(l)||(l=observableThrow(new nr)),new sr(function(e){var n=0,t=new qt,r=new kt,i=!1,o=new kt;function s(){var t=n;o.setDisposable(f.scheduleFuture(null,c,function(){(i=n===t)&&(m(l)&&(l=In(l)),r.setDisposable(l.subscribe(e)))}))}return r.setDisposable(t),s(),t.setDisposable(u.subscribe(function(t){i||(n++,e.onNext(t),s())},function(t){i||(n++,e.onError(t))},function(){i||(n++,e.onCompleted())})),new Ft(r,o)},u);if(he.isObservable(t)||w(t))return e=this,h=t,a=arguments[1],p=arguments[2],w(h)&&(p=a,a=h,h=observableNever()),he.isObservable(p)||(p=observableThrow(new nr)),new sr(function(i){var o=new kt,s=new kt,t=new qt;o.setDisposable(t);var u=0,c=!1;function n(t){var e=u,n=new qt;function r(){return c=e===u}s.setDisposable(n),n.setDisposable(t.subscribe(function(){r()&&o.setDisposable(p.subscribe(i)),n.dispose()},function(t){r()&&i.onError(t)},function(){r()&&o.setDisposable(p.subscribe(i))}))}function r(){var t=!c;return t&&u++,t}return n(h),t.setDisposable(e.subscribe(function(t){if(r()){i.onNext(t);var e=C(a)(t);if(e===E)return i.onError(e.e);n(m(e)?In(e):e)}},function(t){r()&&i.onError(t)},function(){r()&&i.onCompleted()})),new Ft(o,s)},e);throw new Error("Invalid arguments")},te.throttle=function(t,i){Lt(i)||(i=Jt);var o=+t||0;if(o<=0)throw new RangeError("windowDuration cannot be less or equal zero.");var e=this;return new sr(function(n){var r=0;return e.subscribe(function(t){var e=i.now();(0===r||o<=e-r)&&(r=e,n.onNext(t))},function(t){n.onError(t)},function(){n.onCompleted()})},e)};var rr=function(n){function t(t,e){this.source=t,this.controller=new hr,this.paused=!0,e&&e.subscribe?this.pauser=this.controller.merge(e):this.pauser=this.controller,n.call(this)}return mt(t,n),t.prototype._subscribe=function(t){var e=this.source.publish(),n=e.subscribe(t),r=St,i=this.pauser.startWith(!this.paused).distinctUntilChanged().subscribe(function(t){t?r=e.connect():(r.dispose(),r=St)});return new Rt([n,r,i])},t.prototype.pause=function(){this.paused=!0,this.controller.onNext(!1)},t.prototype.resume=function(){this.paused=!1,this.controller.onNext(!0)},t}(he);te.pausable=function(t){return new rr(this,t)};var ir=function(r){function t(t,e,n){r.call(this),this.subject=new or(e,n),this.source=t.multicast(this.subject).refCount()}return mt(t,r),t.prototype._subscribe=function(t){return this.source.subscribe(t)},t.prototype.request=function(t){return this.subject.request(null==t?-1:t)},t}(he),or=function(n){function t(t,e){null==t&&(t=!0),n.call(this),this.subject=new hr,this.enableQueue=t,this.queue=t?[]:null,this.requestedCount=0,this.requestedDisposable=null,this.error=null,this.hasFailed=!1,this.hasCompleted=!1,this.scheduler=e||Bt}return mt(t,n),wt(t.prototype,oe,{_subscribe:function(t){return this.subject.subscribe(t)},onCompleted:function(){this.hasCompleted=!0,this.enableQueue&&0!==this.queue.length?this.queue.push(ee.createOnCompleted()):(this.subject.onCompleted(),this.disposeCurrentRequest())},onError:function(t){this.hasFailed=!0,this.error=t,this.enableQueue&&0!==this.queue.length?this.queue.push(ee.createOnError(t)):(this.subject.onError(t),this.disposeCurrentRequest())},onNext:function(t){this.requestedCount<=0?this.enableQueue&&this.queue.push(ee.createOnNext(t)):(0==this.requestedCount--&&this.disposeCurrentRequest(),this.subject.onNext(t))},_processRequest:function(t){if(this.enableQueue)for(;0<this.queue.length&&(0<t||"N"!==this.queue[0].kind);){var e=this.queue.shift();e.accept(this.subject),"N"===e.kind?t--:(this.disposeCurrentRequest(),this.queue=[])}return t},request:function(t){this.disposeCurrentRequest();var r=this;return this.requestedDisposable=this.scheduler.schedule(t,function(t,e){var n=r._processRequest(e);if(!(r.hasCompleted||r.hasFailed)&&0<n)return r.requestedCount=n,Nt(function(){r.requestedCount=0})}),this.requestedDisposable},disposeCurrentRequest:function(){this.requestedDisposable&&(this.requestedDisposable.dispose(),this.requestedDisposable=null)}}),t}(he);te.controlled=function(t,e){return t&&Lt(t)&&(e=t,t=!0),null==t&&(t=!0),new ir(this,t,e)},te.pipe=function(e){var n=this.pausableBuffered();function t(){n.resume()}return e.addListener("drain",t),n.subscribe(function(t){!e.write(t)&&n.pause()},function(t){e.emit("error",t)},function(){!e._isStdio&&e.end(),e.removeListener("drain",t)}),n.resume(),e};var sr=c.AnonymousObservable=function(n){function r(t,e){var n,r=e[0],i=e[1],o=C(i.__subscribe).call(i,r);o!==E||r.fail(E.e)||x(E.e),r.setDisposable((n=o)&&w(n.dispose)?n:w(n)?Nt(n):St)}function t(t,e){this.source=e,this.__subscribe=t,n.call(this)}return mt(t,n),t.prototype._subscribe=function(t){var e=new ur(t),n=[e,this];return Bt.scheduleRequired()?Bt.schedule(n,r):r(0,n),e},t}(he),ur=function(e){function t(t){e.call(this),this.observer=t,this.m=new qt}mt(t,e);var n=t.prototype;return n.next=function(t){var e=C(this.observer.onNext).call(this.observer,t);e===E&&(this.dispose(),x(e.e))},n.error=function(t){var e=C(this.observer.onError).call(this.observer,t);this.dispose(),e===E&&x(e.e)},n.completed=function(){var t=C(this.observer.onCompleted).call(this.observer);this.dispose(),t===E&&x(t.e)},n.setDisposable=function(t){this.m.setDisposable(t)},n.getDisposable=function(){return this.m.getDisposable()},n.dispose=function(){e.prototype.dispose.call(this),this.m.dispose()},t}(ue),cr=function(t,e){this._s=t,this._o=e};cr.prototype.dispose=function(){if(!this._s.isDisposed&&null!==this._o){var t=this._s.observers.indexOf(this._o);this._s.observers.splice(t,1),this._o=null}};var hr=c.Subject=function(t){function e(){t.call(this),this.isDisposed=!1,this.isStopped=!1,this.observers=[],this.hasError=!1}return mt(e,t),wt(e.prototype,oe.prototype,{_subscribe:function(t){return Ot(this),this.isStopped?(this.hasError?t.onError(this.error):t.onCompleted(),St):(this.observers.push(t),new cr(this,t))},hasObservers:function(){return Ot(this),0<this.observers.length},onCompleted:function(){if(Ot(this),!this.isStopped){this.isStopped=!0;for(var t=0,e=g(this.observers),n=e.length;t<n;t++)e[t].onCompleted();this.observers.length=0}},onError:function(t){if(Ot(this),!this.isStopped){this.isStopped=!0,this.error=t,this.hasError=!0;for(var e=0,n=g(this.observers),r=n.length;e<r;e++)n[e].onError(t);this.observers.length=0}},onNext:function(t){if(Ot(this),!this.isStopped)for(var e=0,n=g(this.observers),r=n.length;e<r;e++)n[e].onNext(t)},dispose:function(){this.isDisposed=!0,this.observers=null}}),e.create=function(t,e){return new pr(t,e)},e}(he),ar=c.AsyncSubject=function(t){function e(){t.call(this),this.isDisposed=!1,this.isStopped=!1,this.hasValue=!1,this.observers=[],this.hasError=!1}return mt(e,t),wt(e.prototype,oe.prototype,{_subscribe:function(t){return Ot(this),this.isStopped?(this.hasError?t.onError(this.error):(this.hasValue&&t.onNext(this.value),t.onCompleted()),St):(this.observers.push(t),new cr(this,t))},hasObservers:function(){return Ot(this),0<this.observers.length},onCompleted:function(){var t;if(Ot(this),!this.isStopped){this.isStopped=!0;var e=g(this.observers),n=e.length;if(this.hasValue)for(t=0;t<n;t++){var r=e[t];r.onNext(this.value),r.onCompleted()}else for(t=0;t<n;t++)e[t].onCompleted();this.observers.length=0}},onError:function(t){if(Ot(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=t;for(var e=0,n=g(this.observers),r=n.length;e<r;e++)n[e].onError(t);this.observers.length=0}},onNext:function(t){Ot(this),this.isStopped||(this.value=t,this.hasValue=!0)},dispose:function(){this.isDisposed=!0,this.observers=null,this.error=null,this.value=null}}),e}(he),pr=c.AnonymousSubject=function(n){function t(t,e){this.observer=t,this.observable=e,n.call(this)}return mt(t,n),wt(t.prototype,oe.prototype,{_subscribe:function(t){return this.observable.subscribe(t)},onCompleted:function(){this.observer.onCompleted()},onError:function(t){this.observer.onError(t)},onNext:function(t){this.observer.onNext(t)}}),t}(he),lr=c.BehaviorSubject=function(e){function t(t){e.call(this),this.value=t,this.observers=[],this.isDisposed=!1,this.isStopped=!1,this.hasError=!1}return mt(t,e),wt(t.prototype,oe.prototype,{_subscribe:function(t){return Ot(this),this.isStopped?(this.hasError?t.onError(this.error):t.onCompleted(),St):(this.observers.push(t),t.onNext(this.value),new cr(this,t))},getValue:function(){return Ot(this),this.hasError&&x(this.error),this.value},hasObservers:function(){return Ot(this),0<this.observers.length},onCompleted:function(){if(Ot(this),!this.isStopped){this.isStopped=!0;for(var t=0,e=g(this.observers),n=e.length;t<n;t++)e[t].onCompleted();this.observers.length=0}},onError:function(t){if(Ot(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=t;for(var e=0,n=g(this.observers),r=n.length;e<r;e++)n[e].onError(t);this.observers.length=0}},onNext:function(t){if(Ot(this),!this.isStopped){this.value=t;for(var e=0,n=g(this.observers),r=n.length;e<r;e++)n[e].onNext(t)}},dispose:function(){this.isDisposed=!0,this.observers=null,this.value=null,this.error=null}}),t}(he),fr=c.ReplaySubject=function(r){var i=Math.pow(2,53)-1;function t(t,e,n){this.bufferSize=null==t?i:t,this.windowSize=null==e?i:e,this.scheduler=n||Bt,this.q=[],this.observers=[],this.isStopped=!1,this.isDisposed=!1,this.hasError=!1,this.error=null,r.call(this)}return mt(t,r),wt(t.prototype,oe.prototype,{_subscribe:function(t){Ot(this);var e,n,r=new ae(this.scheduler,t),i=(e=this,n=r,Nt(function(){n.dispose(),!e.isDisposed&&e.observers.splice(e.observers.indexOf(n),1)}));this._trim(this.scheduler.now()),this.observers.push(r);for(var o=0,s=this.q.length;o<s;o++)r.onNext(this.q[o].value);return this.hasError?r.onError(this.error):this.isStopped&&r.onCompleted(),r.ensureActive(),i},hasObservers:function(){return Ot(this),0<this.observers.length},_trim:function(t){for(;this.q.length>this.bufferSize;)this.q.shift();for(;0<this.q.length&&t-this.q[0].interval>this.windowSize;)this.q.shift()},onNext:function(t){if(Ot(this),!this.isStopped){var e=this.scheduler.now();this.q.push({interval:e,value:t}),this._trim(e);for(var n=0,r=g(this.observers),i=r.length;n<i;n++){var o=r[n];o.onNext(t),o.ensureActive()}}},onError:function(t){if(Ot(this),!this.isStopped){this.isStopped=!0,this.error=t,this.hasError=!0;var e=this.scheduler.now();this._trim(e);for(var n=0,r=g(this.observers),i=r.length;n<i;n++){var o=r[n];o.onError(t),o.ensureActive()}this.observers.length=0}},onCompleted:function(){if(Ot(this),!this.isStopped){this.isStopped=!0;var t=this.scheduler.now();this._trim(t);for(var e=0,n=g(this.observers),r=n.length;e<r;e++){var i=n[e];i.onCompleted(),i.ensureActive()}this.observers.length=0}},dispose:function(){this.isDisposed=!0,this.observers=null}}),t}(he);c.Pauser=function(t){function e(){t.call(this)}return mt(e,t),e.prototype.pause=function(){this.onNext(!1)},e.prototype.resume=function(){this.onNext(!0)},e}(hr),"function"==typeof define&&"object"==typeof define.amd&&define.amd?(p.Rx=c,define(function(){return c})):r&&i?a?(i.exports=c).Rx=c:r.Rx=c:p.Rx=c;var dr=k()}).call(this);
//# sourceMappingURL=rx.prom.map